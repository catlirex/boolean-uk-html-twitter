(window.webpackJsonp=window.webpackJsonp||[]).push([[66,62],{"1RVd":function(e,t,s){"use strict";s.r(t),s.d(t,"InlineComposeContainer",(function(){return u}));var n=s("97Jx"),a=s.n(n),r=s("ERkP"),o=s("GVND"),i=s("Ub51"),c=s("MWbm"),d=s("7N4s"),l=s("cHvH"),h=s("rHpw");const u=({getTweetHeight:e,history:t,location:s,richTextInputContext:n,typeaheadWrapper:h,parentTweetId:u,replyPressToggle:m})=>{const{isModal:g}=r.useContext(d.a);return r.createElement(l.a,null,(({windowWidth:d})=>r.createElement(o.a.Consumer,null,(o=>r.createElement(c.a,{style:p.root},r.createElement(i.a,a()({},o,{getTweetHeight:e,history:t,isInline:!0,isModal:g,location:s,parentTweetId:u,replyPressToggle:m,richTextInputContext:n,typeaheadWrapper:h,windowWidth:d})))))))},p=h.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=u},GVND:function(e,t,s){"use strict";var n=s("ERkP");const a=n.createContext({onAnimationStarted:()=>{},onAnimationEnded:()=>{},onHeightChanged:()=>{}});t.a=a},M5JI:function(e,t,s){"use strict";s.r(t);var n=s("1RVd"),a=s("SADN");t.default=Object(a.a)(n.default)},SADN:function(e,t,s){"use strict";var n=s("97Jx"),a=s.n(n),r=s("ERkP"),o=s("RH6X"),i=s("rziq"),c=s("hHEM"),d=s("keCP");const l={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:i.a,sendTweetCommandName:i.b};t.a=e=>t=>r.createElement(e,a()({},t,{richTextInputContext:l,typeaheadWrapper:o.a}))},XpKj:function(e,t,s){"use strict";s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return h})),s.d(t,"f",(function(){return m})),s.d(t,"e",(function(){return g})),s.d(t,"c",(function(){return w})),s.d(t,"a",(function(){return T}));var n=s("kGix"),a=s("Ssj5"),r=s("oEOe");const o="scheduledTweets",i="rweb/scheduledTweets",c={fetchStatus:n.a.NONE,scheduledTweets:[]},d="FETCH_SCHEDULED_TWEETS",l=Object(r.a)(i,d),h="DELETE_SCHEDULED_TWEET",u=Object(r.a)(i,h);function p(e=c,t){switch(t.type){case l.SUCCESS:return{...e,fetchStatus:n.a.LOADED,scheduledTweets:t.payload};case l.FAILURE:return{...e,fetchStatus:n.a.FAILED};case l.REQUEST:return{...e,fetchStatus:n.a.LOADING};case u.SUCCESS:{const{meta:n}=t;return n&&n.deleteScheduledTweetId?{...e,scheduledTweets:(s=n.deleteScheduledTweetId,a=e.scheduledTweets,a.filter((e=>e.rest_id!==s)))}:e}default:return e}var s,a}a.a.register({[o]:p});const m=e=>e.scheduledTweets.scheduledTweets,g=e=>e.scheduledTweets.fetchStatus,w=()=>(e,t,{api:s})=>Object(r.b)(e,{request:s.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:l,context:d}).then((()=>{})),T=e=>(t,s,{api:n})=>Object(r.b)(t,{request:n.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:u,context:h,meta:{deleteScheduledTweetId:e}})},pcjM:function(e,t,s){"use strict";s.r(t),s.d(t,"Compose",(function(){return be}));var n=s("97Jx"),a=s.n(n),r=s("KEM+"),o=s.n(r),i=(s("kYxP"),s("ERkP")),c=s("HPNB"),d=(s("VAZu"),s("Ub51")),l=s("zh9S"),h=s("ge3j"),u=s("pidX"),p=s("0KEI"),m=s("AspN"),g=s("XOJV"),w=s("G6rE"),T=s("oEGd"),S=s("hqKg"),f=s("rU/Q"),E=s("XpKj");const C=e=>(t,s)=>{const n=((e,t)=>t.location.state)(0,s);return n?e(n):void 0},_=Object(S.createSelector)(((e,t)=>t.activeUser),w.e.selectLoggedInUser,((e,t)=>e||t)),b=(e,t)=>{const{location:{query:s}}=t;return s&&"string"==typeof s.in_reply_to?s.in_reply_to:void 0},y=C((e=>e.inReplyToStatusId)),R=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,v=C((e=>e.defaultText)),x=C((e=>e.quotedStatus)),H=({mediaIds:e,cardUrl:t,...s})=>s,I=C((e=>e.isSelfThreadReply)),B=C((e=>e.hideUnsentTweetsButton)),D=C((e=>e.headingSubtitle)),A=C((e=>e.headingTitle)),O=Object(S.createSelector)((e=>h.m(e,"")),((e,t)=>{const s=v(e,t);return Object(u.a)(t.location)||s}),((e,t)=>t.quotedStatus?t.quotedStatus:x(e,t)),m.g,R,((e,t,s,n,a)=>e.map(((e,r)=>({...H(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===r?s:void 0,text:0===r&&t&&!a?t:e.text}))))),j=Object(S.createStructuredSelector)({activeUser:_,composerData:O,draftTweets:f.e,inReplyToStatus:(e,t)=>{const s=b(0,t)||y(e,t);return s?g.a.selectHydrated(e,s):void 0},inReplyToStatusId:b,isIntentRoute:R,isSelfThreadReply:I,isSending:e=>h.p(e,""),scheduledTweets:E.f,sendingProgress:h.r,composeSemanticCoreId:C((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:B,subtitle:D,title:A}),U={createDraftTweetApiErrorHandler:Object(p.d)(f.d),createScheduledTweetApiErrorHandler:Object(p.d)(E.d),googleAnalyticsPageView:l.a,scribePageImpression:l.d,fetchScheduledTweets:E.c,fetchDraftTweets:f.c};var M=Object(T.g)(j,U),P=s("RgK2"),k=s.n(P),N=s("jHSc"),V=s("MXY2"),W=s("3XMw"),q=s.n(W),z=s("iFPY"),F=s("QbaN"),L=s("oQhu"),J=s("v6aA"),Q=s("Lsrn"),X=s("k/Ka");const K=(e={})=>Object(X.a)("svg",{...e,style:[Q.a.root,e.style],viewBox:"0 0 32 32"},i.createElement("g",null,i.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));K.metadata={width:32,height:32};var G=K,Y=s("MWbm"),Z=s("t62R"),$=s("4zmP"),ee=s("rHpw"),te=s("rxPX"),se=s("HAhZ");const ne="newsletter_callout",ae=e=>Object(se.b)(e,ne);var re=Object(te.a)().propsFromState((()=>({shouldShowNewsletterCallout:ae}))).propsFromActions((()=>({addTip:se.a})));const oe=q.a.ed33a3b6,ie=ee.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var ce=re((({addTip:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:s}=i.useContext(J.a),n=s.isTrue("responsive_web_newsletters_callout_enabled"),a=t&&n,r=i.createElement(q.a.I18NFormatMessage,{$i18n:"dd9ea7de"},i.createElement(Z.c,{link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},q.a.jea718ec));return a?i.createElement(Y.a,{style:ie.revueCallout},i.createElement($.a,{Icon:G,headline:oe,onClose:()=>{e({[ne]:!0})},text:r,withCloseButton:!0})):null})),de=s("7nmT"),le=s.n(de),he=s("Dtul"),ue=s("7JQg"),pe="tweetButton",me=s("/yvb"),ge=s("JYMr"),we=s("cHvH"),Te=s("7N4s");const Se=q.a.b8f0483e,fe=q.a.a133d13e,Ee={page:"compose"},Ce={page:"compose",section:"reply"},_e={context:"compose_intent_logged_in"};class be extends i.Component{constructor(...e){super(...e),o()(this,"state",{isValid:!1}),o()(this,"_handleAppBarHeight",Object(L.a)((()=>{const e=le.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50}))),o()(this,"_handleBackClick",(()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()})),o()(this,"_handleCloseComposer",(()=>{this._appBarRef&&this._appBarRef.goBack()})),o()(this,"_handleSendTweet",(()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()})),o()(this,"_setValidity",(e=>{e!==this.state.isValid&&this.setState({isValid:e})})),o()(this,"_getScribeNamespace",(()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?Ce:Ee)),o()(this,"_getScribeData",(()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?_e:k.a})),o()(this,"_renderAppBarRightControl",(()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{inReplyToStatus:s,isSelfThreadReply:n,isSending:a,activeUser:r}=this.props,o=!e||a||!r;return t?void 0:i.createElement(me.a,{disabled:o,onPress:this._handleSendTweet,size:"normalCompact",testID:pe,type:"primary"},Object(V.a)({inReplyToStatus:!!s,isSelfThreadReply:!!n,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread}))})),o()(this,"_renderHeaderWithProgressBar",(e=>{const{isModal:t}=this.context,{sendingProgress:s,isSending:n}=this.props;return i.createElement(i.Fragment,null,i.createElement(ge.a,{progress:n?Math.max(s,.02):0,style:[ye.progressBar,t&&ye.progressBarModal]}),e)})),o()(this,"_renderUnsentHeading",(()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:s}=this.props;if(!t&&(s.length>0||e.length>0))return i.createElement(Y.a,{style:ye.unsentHeadingContainer},i.createElement(me.a,{onPress:this._handleOpenUnsent,size:"normalCompact",type:"text"},fe))})),o()(this,"_handleOpenUnsent",(()=>{const{history:e}=this.props;Object(l.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")})),o()(this,"_setAppBarRef",(e=>{this._appBarRef=e})),o()(this,"_handleComposeContainerRef",(e=>{this._composeContainerRef=e}))}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:s,fetchDraftTweets:n,fetchScheduledTweets:a,googleAnalyticsPageView:r,scribePageImpression:o}=this.props,i=this._getScribeNamespace();o(i),r(i),this._unlockReload=he.a.acquire(),e&&(a().catch(s()),n().catch(t()))}componentWillUnmount(){this._unlockReload()}render(){const{createDraftTweetApiErrorHandler:e,createScheduledTweetApiErrorHandler:t,draftTweets:s,fetchDraftTweets:n,fetchScheduledTweets:r,hideUnsentTweetsButton:o,history:l,location:h,activeUser:u,composerData:p,googleAnalyticsPageView:m,inReplyToStatus:g,inReplyToStatusId:w,isIntentRoute:T,isSelfThreadReply:S,isSending:f,match:E,scheduledTweets:C,scribePageImpression:_,sendingProgress:b,staticContext:y,subtitle:R,title:v,...x}=this.props,H=T&&!u,{isModal:I}=this.context;return i.createElement(ue.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.createElement(we.a,null,(({windowWidth:e})=>{const t=H&&c.a.shouldRenderAsModal(e),s=(null==p?void 0:p.length)>1;return i.createElement(i.Fragment,null,H&&i.createElement(z.a,{history:l,location:h}),!t&&i.createElement(i.Fragment,null,i.createElement(N.b,{appBarRef:this._setAppBarRef,documentTitle:Se,hideBackButton:!1,history:l,middleControl:this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:R,title:v},i.createElement(d.a,a()({},x,{activeUser:u,history:l,isModal:I,location:h,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,setValidity:this._setValidity,windowWidth:e}))),s?i.createElement(ce,null):null))})))}get isCommunityTweet(){var e;const{composerData:t}=this.props,s=t[0].text.length>0;return!!(null==(e=t[0].quotedStatus)?void 0:e.community_id_str)&&!s}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(F.h)(e[0].scheduledFor)}}o()(be,"contextType",Te.a);const ye=ee.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}})));t.default=M(be)},ynU0:function(e,t,s){"use strict";s.r(t);var n=s("pcjM"),a=s("SADN");t.default=Object(a.a)(n.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.392902f5.js.map