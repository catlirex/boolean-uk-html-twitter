(window.webpackJsonp=window.webpackJsonp||[]).push([[46,144],{"7sPD":function(e,t,n){"use strict";n.r(t),n.d(t,"LiveEventScreen",(function(){return ce}));var a=n("KEM+"),i=n.n(a),r=(n("kYxP"),n("ERkP")),s=n("k49u"),o=n("zI2C"),l=n("v6aA"),c=n("6/RC"),d=n("es0u"),u=(n("MvUL"),n("zh9S")),m=n("oEGd"),h=n("0KEI"),p=n("hqKg"),_=n("kGix"),b=n("RrqW");const g=(e,t,n)=>({isFullPageInterstitial:e,type:t,screenName:n}),v=({isBlockedBy:e=!1,isBlocking:t=!1,isSensitive:n=!1,screenName:a})=>{const i=[];return e?i.push(g(!0,b.a.BLOCKED_BY,a)):(t&&i.push(g(!0,b.a.BLOCKED,a)),n&&i.push(g(!1,b.a.SENSITIVE))),i.length?i:void 0};var f=n("lPpt"),y=n("tn7R"),I=n("G6rE"),E=n("zlxh");const C=(e,t)=>t.match.params.eventId,S=e=>({...e?{loggedInUserAvatarURI:e.profile_image_url_https,loggedInUserName:e.name}:null}),w=Object(p.createSelector)(C,((e,t)=>f.a.select(e,C(0,t))),((e,t)=>{const n=(f.a.selectErrors(e)||{})[C(0,t)],{errors:a=[]}=n||{},i=a.find((e=>e.code===s.a.BlockedUserError));return i&&i.message&&i.message.replace("@","")}),((e,t)=>f.a.selectFetchStatus(e,C(0,t))),((e,t)=>{var n;return[].concat(null==(n=t.location.query)?void 0:n.timeline)[0]}),((e,t)=>{var n;return null==(n=t.location.state)?void 0:n.promotedCardState}),I.e.selectLoggedInUser,((e,t)=>f.a.selectIsTOO(e,C(0,t))),((e,t,n,a,i,r,s,o)=>{const l=((e,t,n,a)=>({liveEventDetails:{eventId:e},fetchStatus:t?_.a.LOADED:n,refreshStatus:n,timelineDetails:{composeDetails:{defaultText:""},eventId:e,timelineId:E.b,timelineIndex:0,timelineLinks:[]},interstitialOrderToDisplay:t?v({isBlockedBy:!0,screenName:t}):void 0,isTOO:!1,isUserSuspended:!1,...S(a)}))(e,n,a,s);if(!t)return l;const c=Object(E.m)(t),d=Object(E.g)(t,c,r),u=Object(E.i)(e,t),m=Object(E.l)(t),h=Object(E.p)(e,t,i),p=(e=>{const{liveEventDetails:t={},users:n}=e||{},{attribution_user_id:a}=t;return!!a&&!Object(y.a)(n||{}).some((e=>e.id_str===a))})(t),{blocking:b,blocked_by:g,screen_name:f}=u.author||{},{sensitive:I}=t.liveEventDetails,C=v({isBlockedBy:g,isBlocking:b,isSensitive:I,screenName:f});return{...l,...S(s),liveEventDetails:u,fetchStatus:t?_.a.LOADED:a,refreshStatus:a,interstitialOrderToDisplay:C,isTOO:o,isUserSuspended:p,serverPollingIntervalSeconds:m,scoreData:c,carousel:d.length>0?d:void 0,timelineDetails:h}})),D={createLocalApiErrorHandler:Object(h.d)("LIVE_EVENT_SCREEN"),fetchLiveEvent:f.a.fetchOne,googleAnalyticsPageView:u.a,remindMeButtonSubscribe:f.a.subscribe,remindMeButtonUnsubscribe:f.a.unSubscribe,scribeAction:u.c,scribePageImpression:u.d};var x=Object(m.g)(w,D),k=n("/Ikv"),T=n("muX9"),A=n("BcsE");const P=({name:e,content:t})=>t||Object(A.a)(t)?r.createElement("meta",{content:t,key:e,name:e}):null,O=Object.freeze({broadcast:"broadcast",video:"video",image:"image"});var R=({liveEventDetails:e,timelineDetails:t,carousel:n})=>{const{title:a,description:i,eventId:s}=e,{timelineId:o}=t,l=n[Object(E.o)(n)],{slate:c}=l||{},d=(e=>{const{carouselItemInfo:{type:t}}=e;let n;return t===E.c.LIVE_BROADCAST||t===E.c.REPLAY_BROADCAST?n=O.broadcast:t===E.c.VOD||t===E.c.GIF?n=O.video:t===E.c.SLATE&&(n=O.image),n})(l);return a&&i&&c?r.createElement(T.a,null,((e,t,n,a,i)=>[{name:"twitter:card",content:k.a.CardNames.LIVE_EVENT},{name:"twitter:text:event_id",content:n},{name:"twitter:text:event_title",content:e},{name:"twitter:text:event_subtitle",content:t},{name:"twitter:text:event_timeline_id",content:i},{name:"twitter:image:event_thumbnail:src",content:a.image.url},{name:"twitter:image:event_thumbnail:height",content:a.image.height},{name:"twitter:image:event_thumbnail:width",content:a.image.width}])(a,i,s,c,o).map(P),((e,t,n,a)=>{var i,r,s,o,l,c,d,u,m,h,p,_,b,g,v,f,y,I,E,C,S,w,D,x,k,T,A,P,O,R,L,M,N,B;return[{name:"twitter:text:event_category",content:e.category},{name:"twitter:text:broadcast_id",content:null==(i=n.mediaDetails)?void 0:i.broadcastId},{name:"twitter:text:broadcast_media_key",content:null==(r=n.mediaDetails)?void 0:r.broadcastMediaKey},{name:"twitter:text:broadcast_media_id",content:(null==(s=n.mediaDetails)?void 0:s.broadcastId)&&(null==(o=n.mediaDetails)?void 0:o.mediaId)},{name:"twitter:text:broadcast_title",content:null==(l=n.mediaDetails)?void 0:l.broadcastTitle},{name:"twitter:text:broadcaster_twitter_id",content:null==(c=n.mediaDetails)?void 0:c.broadcastTwitterId},{name:"twitter:text:broadcaster_display_name",content:null==(d=n.mediaDetails)?void 0:d.broadcastDisplayName},{name:"twitter:text:broadcaster_username",content:null==(u=n.mediaDetails)?void 0:u.broadcastUsername},{name:"twitter:text:broadcast_width",content:null==(m=n.mediaDetails)?void 0:m.broadcastWidth},{name:"twitter:text:broadcast_height",content:null==(h=n.mediaDetails)?void 0:h.broadcastHeight},{name:"twitter:text:broadcast_source",content:null==(p=n.mediaDetails)?void 0:p.broadcastSource},{name:"twitter:text:broadcast_orientation",content:null==(_=n.mediaDetails)?void 0:_.broadcastOrientation},{name:"twitter:user:author:id",content:null==(b=e.author)?void 0:b.id_str},{name:"twitter:text:event_badge",content:null==(g=n.slate)?void 0:g.label},{name:"twitter:string:media_tweet_id",content:null==(v=n.mediaDetails)||null==(f=v.coverTweet)?void 0:f.id_str},{name:"twitter:image:square_thumbnail:src",content:null==(y=n.slate)?void 0:y.image.url},{name:"twitter:image:square_thumbnail:height",content:null==(I=n.slate)?void 0:I.image.height},{name:"twitter:image:square_thumbnail:width",content:null==(E=n.slate)?void 0:E.image.width},{name:"twitter:text:event_thumbnail:media:size:crops:16x9:w",content:(null==(C=n.slate)||null==(S=C.cropCandidates)?void 0:S.length)&&(null==(w=n.slate)?void 0:w.cropCandidates[0].w)},{name:"twitter:text:event_thumbnail:media:size:crops:16x9:h",content:(null==(D=n.slate)||null==(x=D.cropCandidates)?void 0:x.length)&&(null==(k=n.slate)?void 0:k.cropCandidates[0].h)},{name:"twitter:text:event_thumbnail:media:size:crops:16x9:x",content:(null==(T=n.slate)||null==(A=T.cropCandidates)?void 0:A.length)&&(null==(P=n.slate)?void 0:P.cropCandidates[0].x)},{name:"twitter:text:event_thumbnail:media:size:crops:16x9:y",content:(null==(O=n.slate)||null==(R=O.cropCandidates)?void 0:R.length)&&(null==(L=n.slate)?void 0:L.cropCandidates[0].y)},{name:"twitter:text:remind_me_notification_id",content:null==(M=e.remindMeSubscription)?void 0:M.notification_id},{name:"twitter:image:broadcast_thumbnail:src",content:null==(N=n.mediaDetails)?void 0:N.broadcastThumbnail},{name:"twitter:string:broadcast_replay_edited_start_time",content:null==(B=n.mediaDetails)?void 0:B.broadcastReplayStartTime},{name:"twitter:string:media_type",content:a}]})(e,0,l,d).map(P)):null},L=n("3XMw"),M=n.n(L),N=n("I6Uj");const B=M.a.i8d6a27e,U=M.a.hbae0a4e,F={page:"live_event_timeline",section:"live_event_header"},j=({author:e,hashtag:t,title:n})=>{const a=n&&n.trim()||"";return V(e)?H(e.screen_name,t,a):t},V=e=>!!e,H=(e,t,n)=>t?B({author:e,timelineHashtag:t,title:n}):U({author:e,title:n});var z=e=>{const{id:t,...n}=e,a=Object(E.h)(t),i=j(n);return r.createElement(N.a,{scribeNamespace:F,shareText:i,url:a})},q=n("LVU8");const W=e=>({items:[G(e)]}),G=({liveEventDetails:e,timelineTabPosition:t,selectedTimeline:n,mediaDetails:a,includeTimelineSource:i=!1,carouselLength:r,carouselPosition:s,tilePosition:o})=>{const{eventId:l,remindMeSubscription:c}=e,{broadcastId:d}=a||{},{timelineId:u,timelineSourceId:m,timelineSourceType:h}=n||{},{toggle_visible:p,subscribed:_,notification_id:b}=c||{},g={},v={},f={};return l&&(v.host_event_id=l),u&&(v.timeline_id=u),i&&(v.timeline_source_id=m,v.timeline_source_type=h),t&&(v.timeline_tab_position=t),r&&(v.carousel_count=r,v.carousel_position=s),o&&(v.tile_position=o),c&&(v.remind_me_notification_id=b,v.remind_me_subscribed=_,v.remind_me_toggle_visible=p),d&&(f.host_broadcast_id=d),Object.keys(v).length>0&&(g.live_video_event_details=v),Object.keys(f).length>0&&(g.live_broadcast_details=f),g};var Y=n("KdqI"),$=n("XvPy"),K=n("gUG0"),Q=n("Vgm9"),X=n("VTxf"),J=n("rJoH"),Z=n("yoO3"),ee=n("EskI"),te=n("VS6U"),ne=n("MWbm"),ae=n("G8HL"),ie=n("t62R"),re=n("rHpw"),se=n("7JQg"),oe=n("zrc3"),le=n("oQhu");class ce extends r.Component{constructor(...e){super(...e),i()(this,"_carouselIndexReceived",!1),i()(this,"_defaultPollingInterval",this.context.featureSwitches.getNumberValue("live_event_timeline_default_refresh_rate_interval_seconds",30)),i()(this,"_minPollingInterval",this.context.featureSwitches.getNumberValue("live_event_timeline_minimum_refresh_rate_interval_seconds",10)),i()(this,"_newSegmentedControlDesign",!1),i()(this,"_shouldHonourServerRefresh",this.context.featureSwitches.isTrue("live_event_timeline_server_controlled_refresh_rate_enabled")),i()(this,"state",{isPlayerFullscreen:!1,selectedCarouselItemId:void 0}),i()(this,"_renderPrimaryContent",(({isWide:e})=>{const{carousel:t,fetchStatus:n,history:a,isTOO:i,interstitialOrderToDisplay:s,liveEventDetails:o,refreshStatus:l,remindMeButtonSubscribe:c,remindMeButtonUnsubscribe:d,scoreData:u,timelineDetails:m}=this.props,{isPlayerFullscreen:h}=this.state,p=this._getPollingIntervalMs();return r.createElement($.a,{carousel:t,fetchStatus:n,history:a,interstitialOrderToDisplay:s,isPlayerFullscreen:h,isTOO:i,isWide:e,liveEventDetails:o,onChildScribeAction:this._handleChildScribeAction,onFetch:this._handleInitialFetch,onFullscreenChange:this._handleFullscreenChange,onSelectedCarouselItemChange:this._handleSelectedCarouselItemChanged,onTimelinePoll:this._handleTimelinePoll,pollingIntervalMs:p,refreshStatus:l,remindMeButtonSubscribe:c,remindMeButtonUnsubscribe:d,scoreData:u,timelineDetails:m,withFloatingComposeButton:!0})})),i()(this,"_getSelectedItem",(()=>{const{carousel:e}=this.props,{selectedCarouselItemId:t}=this.state;return Object(E.n)(e,t)})),i()(this,"_getSelectedItemIndex",(()=>{const{carousel:e}=this.props,t=this._getSelectedItem();return e&&t?Object(oe.a)(e,(e=>e.id===t.id)):void 0})),i()(this,"_getScribeProviderMetadata",Object(le.a)(((e,t,n,a,i)=>{const{timelineId:r,timelineIndex:s,timelineLinks:o}=n,{mediaDetails:l}=i||{},c=o&&o.find((e=>e.timelineId===r));return{event_id:t.eventId,...W({carouselLength:e&&e.length,carouselPosition:a,liveEventDetails:t,mediaDetails:l,timelineTabPosition:s,selectedTimeline:c})}}))),i()(this,"_handleInitialFetch",(()=>{this._fetchLiveEvent()})),i()(this,"_fetchLiveEvent",(()=>{const{createLocalApiErrorHandler:e,liveEventDetails:{eventId:t},fetchLiveEvent:n}=this.props;return n(t).catch(e({[s.a.GenericNotFound]:{customAction:q.c}}))})),i()(this,"_handleTimelinePoll",(()=>{this._fetchLiveEvent()})),i()(this,"_handleFullscreenChange",(({isPlayerFullscreen:e})=>{this.setState({isPlayerFullscreen:e})})),i()(this,"_handleOverflowButtonClickScribe",(()=>this._scribeActionWithEventItems({section:"live_event_header",element:"more",action:"click"}))),i()(this,"_handleSelectedCarouselItemChanged",(e=>{this.setState({selectedCarouselItemId:e.id})})),i()(this,"_handleChildScribeAction",((e,t)=>this._scribeActionWithEventItems(e,t))),i()(this,"_scribeTimelineImpression",(()=>{const{carousel:e,liveEventDetails:t,timelineDetails:{timelineId:n,timelineLinks:a},scribeAction:i,scribeNamespace:r}=this.props,s=this._getSelectedItemIndex(),{mediaDetails:o}=this._getSelectedItem()||{},l=a.find((e=>e&&e.timelineId===n));if(l){i({...r,action:"impression"},W({liveEventDetails:t,includeTimelineSource:!0,mediaDetails:o,selectedTimeline:l,carouselLength:e&&e.length,carouselPosition:s}))}})),i()(this,"_maybeSetWindowsTimeline",(()=>{const{fetchStatus:e,liveEventDetails:{title:t,description:n,eventId:a}}=this.props;if(e===_.a.LOADED&&Object(Y.e)()){const{slate:e}=this._getSelectedItem()||{};Object(K.a)().then((({default:i})=>{i.timeline.setActivity({id:`event-${a}`,description:n,image:e&&e.image&&e.image.url,title:t,uri:`twitter://events/timeline/${a}`})}))}}))}componentDidMount(){this._handleInitialFetch(),this._maybeSetWindowsTimeline()}componentWillUnmount(){Object(Y.e)()&&Object(K.a)().then((({default:e})=>{e.timeline.clearActivity()}))}componentDidUpdate(e,t){const{liveEventDetails:{eventId:n},timelineDetails:{timelineId:a}}=this.props,{liveEventDetails:{eventId:i},timelineDetails:{timelineId:r}}=e;e.fetchStatus!==_.a.LOADED&&this._maybeSetWindowsTimeline(),i!==n?this._handleInitialFetch():r!==a&&(this._scribeTimelineTabChange(),this._scribeTimelineImpression())}render(){const{carousel:e,history:t,isUserSuspended:n,liveEventDetails:a,timelineDetails:i}=this.props,{shortTitle:s,title:o}=a,{composeDetails:l}=i,{isPlayerFullscreen:u}=this.state;if(n)return r.createElement(X.a,null);const m=o||E.d,h=this._renderScoreCard(),p=s?r.createElement(ie.c,{withHashflags:!0},s):E.e,_=r.createElement(d.a,{withWhoToFollow:!1},h),b=this.context.loggedInUserId&&!u?this._renderRightButtons():void 0,g=this._getScribeProviderMetadata(e,a,i,this._getSelectedItemIndex(),this._getSelectedItem());return r.createElement(se.b,{data:g},r.createElement(Z.a,null,c.canUseDOM?null:this._renderPageMeta(m),r.createElement(te.a,{backLocation:"/",composeOptions:l,documentTitle:m,headerless:u,history:t,primaryContent:this._renderPrimaryContent,rightControl:b,sidebarContent:_,title:p})))}_renderPageMeta(e){var t,n,a,i,s,l;const{liveEventDetails:c,timelineDetails:d,carousel:u}=this.props,{description:m,eventId:h}=c,p=this._getSelectedItem(),_=h&&`twitter://events/timeline/${h}`,b=h&&`https://twitter.com/i/events/${h||""}`;return r.createElement(r.Fragment,null,r.createElement(J.a,{canonical:b,description:m,image:null==p||null==(t=p.slate)||null==(n=t.image)?void 0:n.url,imageH:null==p||null==(a=p.slate)||null==(i=a.image)?void 0:i.height,imageW:null==p||null==(s=p.slate)||null==(l=s.image)?void 0:l.width,title:e,type:"article"}),r.createElement(o.a,{deepLink:_}),u?r.createElement(R,{carousel:u,liveEventDetails:c,timelineDetails:d}):null)}_renderRightButtons(){const{isTOO:e,liveEventDetails:{author:t,eventId:n,title:a},scribeNamespace:i,timelineDetails:{hashtag:s}}=this.props;return r.createElement(ne.a,{style:de.rightButtonContainer},r.createElement(z,{author:t,hashtag:s,id:n,title:a}),e?null:r.createElement(Q.a,{author:t,eventId:n,onPress:this._handleOverflowButtonClickScribe,redirectOnDelete:t?`/${t.screen_name}/moments`:void 0,scribeNamespace:{...i,section:"live_event_header"},style:de.overflowButton,title:a}))}_renderScoreCard(){const{scoreData:e}=this.props;return e?r.createElement(ee.a,{scoreData:e,withContainer:!0,withHeader:!0}):null}_getPollingIntervalMs(){const{serverPollingIntervalSeconds:e=0}=this.props;return 1e3*(this._shouldHonourServerRefresh?Math.max(e,this._minPollingInterval):this._defaultPollingInterval)}_scribeActionWithEventItems(e,t){const{carousel:n,liveEventDetails:a,scribeAction:i,scribeNamespace:r,timelineDetails:{timelineId:s,timelineLinks:o}}=this.props,l=this._getSelectedItemIndex(),{mediaDetails:c}=this._getSelectedItem()||{},d=o.find((e=>e.timelineId===s));i({...r,...e},W({liveEventDetails:a,mediaDetails:c,selectedTimeline:d,carouselLength:n&&n.length,carouselPosition:l,...t}))}_scribeTimelineTabChange(){const{scribeAction:e,scribeNamespace:t,timelineDetails:{timelineId:n,timelineIndex:a,timelineLinks:i},liveEventDetails:r}=this.props,{mediaDetails:s}=this._getSelectedItem()||{},o=i&&i.find((e=>e.timelineId===n));e({...t,component:n,element:"tab",action:"selected"},W({liveEventDetails:r,timelineTabPosition:a,mediaDetails:s,selectedTimeline:o,includeTimelineSource:!0}))}}i()(ce,"contextType",l.a);const de=re.a.create((e=>({rightButtonContainer:{flexDirection:"row"},overflowButton:{marginStart:e.spaces.space12},segmentedControl:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor}})));t.default=Object(se.c)({page:"live_event_timeline"})(x(Object(ae.a)(ce)))},"8/3a":function(e,t,n){"use strict";var a=n("0mK8"),i=n("ERkP"),r=n("3XMw"),s=n.n(r),o=n("caTy"),l=n("MWbm"),c=n("rHpw"),d=n("t62R"),u=n("yrzJ"),m=n("XrEN"),h=n("Q0VY"),p=n("FiRh");const _=c.a.create((e=>({description:{marginTop:e.spaces.space12}}))),b=(e,t,n)=>n&&!m.a.VIDEO_TYPES.includes(t)?(e=>{var t;const n=e.url?null==(t=Object(o.a)(e.url))?void 0:t.pathname:void 0;return i.createElement(d.c,{color:"gray600",link:n},e.text)})(n):e&&m.a.VIDEO_TYPES.includes(t)?((e,t)=>i.createElement(d.c,{color:"gray600",link:e.permalink},g(t,{screenName:i.createElement(u.a,{screenName:e.user.screen_name})})))(e,t):null,g=(e,t)=>{switch(e){case"animated_gif":return i.createElement(s.a.I18NFormatMessage,{$i18n:"a5d9d070"},t.screenName);case"video":case"vine":return i.createElement(s.a.I18NFormatMessage,{$i18n:"i9606e32"},t.screenName);default:return i.createElement(s.a.I18NFormatMessage,{$i18n:"i1a64d47"},t.screenName)}};var v=({coverTweet:e,description:t,mediaType:n,imageAttribution:a,pivotText:r})=>{const s=t?t.trim():void 0,o=s?h.a.descriptionTextParts(s):[];return i.createElement(l.a,{style:_.description},o.length?i.createElement(d.c,null,o.map(((e,t)=>i.createElement(p.b,{key:`events_textpart_${t}`,linkify:!0,part:e})))):null,b(e,n,a),r?i.createElement(d.c,{color:"gray600"},r):null)},f=n("pjBI");const y=c.a.create((e=>({title:{alignItems:"center",flexDirection:"row",paddingTop:e.spaces.space4},timeString:{flexShrink:0},timeStringMargin:{marginTop:e.spaces.space12}})));t.a=({author:e,coverTweet:t,description:n,imageAttribution:r,mediaType:s,pivotText:o,preTitle:c,time:u,title:m,isTOO:h,withHashflags:p})=>{const _=()=>e?i.createElement(l.a,null,i.createElement(a.a,{author:e,size:"normal",withLink:!0,withScreenName:!0}),u?b(!0):null):null,b=(e=!1)=>i.createElement(d.c,{color:"gray600",numberOfLines:1,size:"normal",style:[y.timeString,e&&y.timeStringMargin]},u),g=()=>c?i.createElement(f.a,null,i.createElement(d.c,{color:"gray600",numberOfLines:1,size:"normal",weight:"bold"},c),u?b():null):null;return i.createElement(i.Fragment,null,h&&c?g():_()||g(),i.createElement(d.c,{dir:"auto",size:"xLarge",style:y.title,weight:"heavy",withHashflags:p},m),n||t||r?i.createElement(v,{coverTweet:t,description:n,imageAttribution:r,mediaType:s,pivotText:o}):null)}},"8FZA":function(e,t,n){"use strict";n.r(t),n.d(t,"BroadcastScreen",(function(){return be}));var a=n("KEM+"),i=n.n(a),r=(n("kYxP"),n("ERkP")),s=n("k49u"),o=n("zI2C");const l="NOT_STARTED",c="RUNNING",d="TIMED_OUT",u="ENDED";var m=n("6/RC"),h=n("es0u"),p=n("zh9S"),_=n("3zvM"),b=n("lMB6");const g=Object(_.e)({namespace:"broadcasts",fetchOneContext:"FETCH_BROADCAST",fetchOneEndpoint:e=>e.Broadcasts.fetchBroadcast,fetchOneParams:([e],t)=>({ids:[e],...t})});var v=b.a.register(g),f=n("oEGd"),y=n("0KEI"),I=n("hqKg"),E=n("kGix"),C=n("Hw0q"),S=n("G6rE");const w=(e,t)=>t.match.params.broadcastId,D=(e,t)=>v.select(e,w(0,t)),x=Object(C.b)("t"),k=Object(I.createSelector)(w,D,((e,t)=>{const n=D(e,t);return n&&n.twitter_user_id?S.e.select(e,n.twitter_user_id):void 0}),((e,t)=>v.selectFetchStatus(e,w(0,t))),((e,t)=>t.location.state?t.location.state.promotedContent:void 0),x,((e,t,n,a,i,r)=>({broadcastId:e,...t&&{broadcast:t},twitterBroadcaster:n,fetchStatus:t?E.a.LOADED:a,promotedContent:i,timecode:r}))),T={createLocalApiErrorHandler:Object(y.d)("BROADCAST_SCREEN"),fetchBroadcast:v.fetchOne,fetchUserIfNeeded:S.e.fetchOneIfNeeded,scribeAction:p.c,scribePageImpression:p.d,googleAnalyticsPageView:p.a};var A=Object(f.g)(k,T),P=n("7JQg"),O=n("SrtL"),R=n("v//M"),L=n("LVU8"),M=n("zlxh"),N=n("muX9"),B=n("rJoH"),U=n("VS6U"),F=n("B5iK"),j=n("pynj"),V=n("Modb"),H=n("lklz"),z=n("MWbm"),q=n("G8HL"),W=n("t62R"),G=n("Wms4"),Y=n("jV+4"),$=n("TIdA"),K=n("A91F"),Q=n("rHpw"),X=n("/Ikv"),J=n("BcsE");const Z=({name:e,content:t})=>t||Object(J.a)(t)?r.createElement("meta",{content:t,key:e,name:e}):null,ee=(e,t)=>`https://twitter.com/i/broadcasts/${e}${t?`?t=${t}`:""}`;var te=e=>{const{broadcast:t,title:n,timecode:a}=e,i=ee(t.broadcast_id,a);return i&&n?r.createElement(N.a,null,((e,t)=>[{name:"twitter:card",content:X.a.CardNames.BROADCAST},{name:"twitter:url:broadcast_url",content:e},{name:"twitter:text:broadcast_title",content:t},{name:"twitter:image:broadcast_pre_live_slate:width",content:"1280"},{name:"twitter:image:broadcast_pre_live_slate:height",content:"720"},{name:"twitter:maxage",content:"210"}])(i,n).map(Z),((e,t)=>[{name:"twitter:text:broadcast_id",content:e.broadcast_id},{name:"twitter:text:broadcast_media_key",content:e.media_key},{name:"twitter:text:broadcast_media_id",content:e.media_id},{name:"twitter:text:broadcaster_twitter_id",content:e.twitter_user_id},{name:"twitter:text:broadcaster_display_name",content:e.user_display_name},{name:"twitter:text:broadcaster_username",content:e.twitter_username},{name:"twitter:text:broadcast_width",content:e.width},{name:"twitter:text:broadcast_height",content:e.height},{name:"twitter:text:broadcast_source",content:e.broadcast_source},{name:"twitter:text:broadcast_timecode",content:t},{name:"twitter:text:broadcast_orientation",content:e.camera_rotation},{name:"twitter:image:broadcast_thumbnail:src",content:e.image_url},{name:"twitter:boolean:broadcast_is_high_latency",content:e.is_high_latency},{name:"twitter:string:broadcast_replay_edited_start_time",content:e.replay_edited_start_time},{name:"twitter:string:broadcast_scheduled_start_time",content:e.scheduled_start_ms},{name:"twitter:site:id",content:e.twitter_user_id},{name:"twitter:string:broadcast_state",content:e.state},{name:"twitter:image:broadcast_pre_live_slate:src",content:e.pre_live_slate_url}])(t,a).map(Z)):null},ne=n("3XMw"),ae=n.n(ne);const ie={url:"https://pbs.twimg.com/lex/placeholder_live_nomargin.png",width:1920,height:1080},re={objectFitVideo:"contain"},se=e=>e&&e.trim().length>0,oe=ae.a.ac4c73d8,le=ae.a.e39b368e,ce=ae.a.f2382014,de=ae.a.e3aac82a,ue=ae.a.hd0bc1eb,me=ae.a.bea1f26a,he=ae.a.jceadc3e,pe=ae.a.d980e29e,_e=ae.a.fc209bb7;class be extends r.Component{constructor(...e){super(...e),i()(this,"_getTitle",(()=>{const{broadcast:e}=this.props;if(e){const{status:t,state:n}=e;if(t)return t;const a=this._getName(e);if(a)switch(n){case c:return ue({name:a});case u:case d:return me({name:a});case l:default:return he}}return he})),i()(this,"_getName",(e=>{const{twitter_username:t,user_display_name:n}=e;return se(n)?n:t&&se(t)?`@${t}`:void 0})),i()(this,"_isLive",(()=>this.props.broadcast&&"RUNNING"===this.props.broadcast.state)),i()(this,"_renderPrimaryContent",(()=>{const{fetchStatus:e}=this.props;return r.createElement(R.a,{accessibilityLabel:de,fetchStatus:e,onRequestRetry:this._handleFetchBroadcast,render:this._render})})),i()(this,"_render",(()=>{const e=this._getTitle();return r.createElement(r.Fragment,null,this._renderMedia(),r.createElement(z.a,{style:ge.header},this._renderUserName(),r.createElement(z.a,{style:ge.title},r.createElement(W.c,{size:"large",style:ge.titleText,weight:"bold"},e),this._isLive()?r.createElement(G.a,{type:"live"},ce):null),this._renderRelatedEvent()))})),i()(this,"_renderUserName",(()=>{const{twitterBroadcaster:e,broadcast:t}=this.props;return e?r.createElement(z.a,{style:ge.userNameWrapper},r.createElement(j.a,{screenName:e.screen_name},r.createElement(Y.a,{isProtected:e.protected,isVerified:e.verified,name:e.name,profileImageUrl:e.profile_image_url_https,screenName:e.screen_name,translatorType:"none"===e.translator_type?void 0:e.translator_type,withLink:!0,withScreenName:!0}))):t&&t.user_display_name?r.createElement(z.a,{style:ge.userNameWrapper},r.createElement(Y.a,{name:t.user_display_name,profileImageUrl:t.profile_image_url})):void 0})),i()(this,"_scribePageImpression",(()=>{const{scribePageImpression:e,googleAnalyticsPageView:t,scribeNamespace:n,broadcastId:a}=this.props;a&&e(n,{items:[{live_broadcast_details:{target_broadcast_id:a}}]}),t(n)})),i()(this,"_fetchTwitterBroadcaster",(()=>{const{fetchUserIfNeeded:e,broadcast:t}=this.props,n=t&&t.twitter_user_id;n&&e(n)})),i()(this,"_startTimer",(()=>{this._stopTimer(),this._timer=new F.b(3e4).interval(this._fetchUpdates),this._timer.start()})),i()(this,"_stopTimer",(()=>{this._timer&&this._timer.stop(),this._timer=void 0})),i()(this,"_handleFetchBroadcast",(()=>{const{broadcast:e,broadcastId:t,createLocalApiErrorHandler:n,fetchBroadcast:a}=this.props;if(t){a(t,{broadcastVersionMap:{[t]:null==e?void 0:e.version}}).catch(n({[s.a.GenericNotFound]:{customAction:L.c}}))}})),i()(this,"_fetchUpdates",(()=>{this._handleFetchBroadcast()}))}componentWillUnmount(){this._stopTimer()}componentDidMount(){this._handleFetchBroadcast(),this._scribePageImpression()}componentDidUpdate(e){e.broadcastId!==this.props.broadcastId&&this._handleFetchBroadcast(),this.props.broadcast&&(e.broadcast&&e.broadcast.broadcast_id)!==(this.props.broadcast&&this.props.broadcast.broadcast_id)&&(this._startTimer(),this._fetchTwitterBroadcaster())}render(){const{history:e}=this.props,t=this._getTitle();return r.createElement(r.Fragment,null,this._renderMetaTags(t),r.createElement(U.a,{backLocation:"/",documentTitle:t,history:e,primaryContent:this._renderPrimaryContent,sidebarContent:r.createElement(h.a,null),title:le}),r.createElement(O.a,{title:t,withMeta:!1}))}_renderMetaTags(e){const{broadcastId:t,twitterBroadcaster:n,broadcast:a,timecode:i}=this.props,s=(null==n?void 0:n.name)||(null==a?void 0:a.user_display_name),l=t&&`twitter://broadcasts/${t}`,c=t&&ee(t);return m.canUseDOM?null:r.createElement(r.Fragment,null,c?r.createElement(B.a,{canonical:c,description:e,title:s,type:"article"}):null,l?r.createElement(o.a,{deepLink:l}):null,a?r.createElement(te,{broadcast:a,timecode:i,title:e}):null)}_renderMedia(){const{broadcast:e}=this.props;return e&&e.state===l?this._renderPreLiveSlate():this._renderPlayer()}_renderStartDateLabel(){const{broadcast:e}=this.props,t=e&&e.scheduled_start_ms?new Date(parseInt(e.scheduled_start_ms,10)):void 0,n=t?pe({date:_e(t)}):void 0;return n?r.createElement(z.a,{style:ge.labelOverlay},r.createElement(G.a,null,n)):null}_renderPreLiveSlate(){const{broadcast:e}=this.props,t=e&&e.pre_live_slate_url?{url:e.pre_live_slate_url,width:600,height:337}:ie;return r.createElement(z.a,null,r.createElement(N.a,null,r.createElement("meta",{content:t.url,property:"og:image"}),r.createElement("meta",{content:t.width,property:"og:image:width"}),r.createElement("meta",{content:t.height,property:"og:image:height"})),r.createElement($.a,{accessibilityLabel:oe,aspectMode:K.a.exact(Q.a.theme.aspectRatios.landscape),image:t,previewMode:!1}),this._renderStartDateLabel())}_renderPlayer(){const{broadcastId:e,broadcast:t,promotedContent:n,timecode:a}=this.props,i=t&&{url:t.image_url,width:t.width,height:t.height},s=t&&t.media_id;if(!(e&&i&&s))return null;const o=t&&Object(M.k)(t.image_url_small,t.image_url_medium,i);return r.createElement(z.a,{style:[ge.card]},r.createElement(N.a,null,r.createElement("meta",{content:i.url,property:"og:image"}),r.createElement("meta",{content:i.width,property:"og:image:width"}),r.createElement("meta",{content:i.height,property:"og:image:height"})),r.createElement(V.a,{accessibilityLabel:oe,aspectRatio:1.7777777777777777,customVariants:o,displayOptions:re,includeBroadcastEventAssociation:!0,poster:i,promotedContent:n,source:{variants:[],videoId:H.b.forBroadcast(e),contentId:s},timecode:a,videoType:"video"}))}_renderRelatedEvent(){const{broadcast:e}=this.props,t=e&&e.liveEvents&&e.liveEvents[0],{id:n,title:a}=t||{};if(!n||!a)return null;const i=`/i/events/${n}`,s=r.createElement(W.c,{color:"primary",link:i},a);return r.createElement(W.c,{style:ge.relatedEvent},r.createElement(ae.a.I18NFormatMessage,{$i18n:"c43d1678"},s))}}const ge=Q.a.create((e=>({card:{backgroundColor:e.colors.gray0,overflow:"hidden"},header:{flexDirection:"column",justifyContent:"center",paddingVertical:e.spaces.space20,paddingHorizontal:e.spaces.space12,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},labelOverlay:{position:"absolute",bottom:e.spaces.space12,left:e.spaces.space12},title:{alignItems:"center",flexDirection:"row",flexWrap:"nowrap"},relatedEvent:{flexBasis:"100%"},userNameWrapper:{marginBottom:e.spaces.space12,alignItems:"flex-start"},titleText:{marginRight:e.spaces.space4}})));t.default=Object(P.c)({page:"broadcast"})(A(Object(q.a)(be)))},A9rn:function(e,t,n){"use strict";const a={...n("IRWI").a,pinToTopWhenAtTop:!0};t.a=a},ACNv:function(e,t,n){"use strict";n.r(t);var a=n("KEM+"),i=n.n(a),r=(n("kYxP"),n("ERkP")),s=n("3XMw"),o=n.n(s),l=n("oQhu"),c=n("mjJ+"),d=n("eb3s");const u=o.a.cfd2f35d;class m extends r.Component{constructor(...e){super(...e),i()(this,"state",{activeConfirmation:null}),i()(this,"_handleConfirm",(e=>{this.setState({activeConfirmation:e})})),i()(this,"_handleConfirmed",(()=>{this.state.activeConfirmation&&this.state.activeConfirmation.callback(),this.setState({activeConfirmation:null}),this.props.onClose()})),i()(this,"_handleCancelConfirm",(()=>{this.setState({activeConfirmation:null})}))}render(){const{onClose:e}=this.props,{activeConfirmation:t}=this.state;return t?this._renderConfirmation(t):r.createElement(c.a,{cancelButtonLabel:u,items:this._getProcessedActionItems(),onCloseRequested:e})}_renderConfirmation(e){if(e&&e.render)return e.render(this._handleConfirmed,this._handleCancelConfirm);{const{headline:t,label:n,confirmButtonType:a,text:i,withCancelButton:s}=e||{};return r.createElement(d.a,{confirmButtonLabel:n,confirmButtonType:a,headline:t,onCancel:this._handleCancelConfirm,onConfirm:this._handleConfirmed,text:i,withCancelButton:s})}}_getProcessedActionItems(){const{actionItems:e,dividerIndices:t,onClose:n}=this.props;return h(e,t,n,this._handleConfirm)}}const h=Object(l.a)(((e,t,n,a)=>e.reduce(((e,{text:i,subText:r,testID:s,onClick:o,confirmation:l,isEmphasized:c,link:d,Icon:u,excludeFromActionMenu:m,withCancelButton:h},p)=>{if(!m){const m=o?()=>{l?l.render?a({callback:o,render:l.render}):a({callback:o,text:l.text,headline:l.headline,label:l.label,confirmButtonType:l.confirmButtonType,withCancelButton:l.withCancelButton}):(o(),n())}:n;e.push({Icon:u,isEmphasized:c,testID:s,subText:r,text:i,onClick:m,link:d,withBottomBorder:t&&t.includes(p)})}return e}),[])));t.default=m},EskI:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n("ERkP"),i=n("3XMw"),r=n.n(i);Object.freeze({BROADCAST_MEDIA_TYPE:"broadcast",VIDEO_MEDIA_TYPE:"video"});const s=Object.freeze({COMPLETED:"COMPLETED",DELAYED:"DELAYED",LIVE:"LIVE",UPCOMING:"UPCOMING"});var o="scorecard",l=n("6vad"),c=n("t62R"),d=n("rHpw"),u=n("U+bB"),m=n("MWbm");const h=r.a.eaaca5db,p=({id:e="",status:t,isLive:n})=>{const a="44"===e.split(":")[0],i=t===s.UPCOMING||t===s.DELAYED;return a&&n||i};class _ extends a.Component{render(){const{scoreData:e}=this.props,t=(e=>{const{moments:t}=e;if(t){const{id:e,participant_scores:n,winner_id:a,progress_strings:i,status:r}=t,o=r===s.LIVE;return{isLive:o,progressStrings:p({id:e,status:r,isLive:o})?i.join(" "):i[0],participantScores:n,winnerId:a}}})(e);return t?this._renderScoreCardWithHeader(t):null}_renderScoreCardWithHeader(e){const{withHeader:t}=this.props;return a.createElement(a.Fragment,null,t?a.createElement(l.b,{text:h,withBottomBorder:!0}):null,this._renderScoresAndMatchStatus(e))}_renderScoresAndMatchStatus(e){const{withContainer:t}=this.props,{isLive:n,participantScores:i,progressStrings:r,winnerId:s}=e,o=i.map((e=>this._renderTeamRow(e,s,n)));return a.createElement(m.a,{style:[b.teamDisplay,t&&b.container]},a.createElement(m.a,{style:b.teamRows},o),a.createElement(c.c,{style:b.matchStatusText},r))}_renderTeamRow(e,t,n){const{participant:{name:i,media:r,id:s},score:l}=e,d=s===t,h=n||d?"bold":"normal";return a.createElement(m.a,{key:s,style:b.teamRow,testID:o},a.createElement(u.a,{source:r.url,style:b.teamLogo}),a.createElement(c.c,{align:"left",numberOfLines:1,style:b.teamName},i),a.createElement(c.c,{style:b.teamScore,weight:h},l),a.createElement(m.a,{style:[b.winnerContainer,d&&b.winner]}))}}const b=d.a.create((e=>({container:{margin:e.spaces.space12},teamDisplay:{alignItems:"center",flexDirection:"row",justifyContent:"center",marginTop:e.spaces.space12},teamRows:{flexGrow:1,flexShrink:1,borderRightWidth:1,borderRightStyle:"solid",borderRightColor:e.colors.gray200},teamRow:{alignItems:"center",flexDirection:"row",justifyContent:"flex-start",marginBottom:e.spaces.space4,marginTop:e.spaces.space4},teamLogo:{borderRadius:e.borderRadii.small,marginRight:e.spaces.space12,width:e.spaces.space20,height:e.spaces.space20},teamName:{flexGrow:1,flexShrink:1},teamScore:{flexShrink:0,marginLeft:e.spaces.space12},winnerContainer:{width:e.spaces.space12},winner:{borderBottomWidth:4,borderBottomColor:"transparent",borderBottomStyle:"solid",borderRightWidth:5,borderRightStyle:"solid",borderRightColor:e.colors.text,borderTopWidth:4,borderTopStyle:"solid",borderTopColor:"transparent"},matchStatusText:{minWidth:`calc(4.5 * ${e.spaces.space20})`,paddingLeft:e.spaces.space12}})))},"HT/6":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=Object.freeze({INITIAL:"initial",AUTO_PAUSED:"autoPaused",USER_PAUSED:"userPaused",AUTO_PLAYING:"autoPlaying",USER_PLAYING:"userPlaying",FINISHED:"finished"})},I6Uj:function(e,t,n){"use strict";var a=n("KEM+"),i=n.n(a),r=(n("kYxP"),n("ERkP")),s=n("CaKu"),o=n("1YZw"),l=n("rxPX");var c=Object(l.a)().propsFromActions((()=>({addToast:o.b}))).withAnalytics({element:"share"}),d=n("3XMw"),u=n.n(d),m=n("JGUy"),h=n("fn9Y"),p=n("/yvb");const _=u.a.c0530da5,b=u.a.ifea3114;var g=({renderMenu:e,onPress:t,style:n,testID:a})=>{const i=r.createElement(h.a,null),s=Object(m.a)();return r.createElement(p.a,{accessibilityLabel:_,hoverLabel:{label:b},icon:i,onPress:t,pullRight:!0,renderMenu:e,style:n,testID:a,type:s})},v="share-button",f="share-by-tweet",y=n("TnY3"),I=n("mjJ+"),E=n("rHpw");n("Cm4o");var C=n("I/9y"),S=n("SOvA"),w=n("jwTb");const D=u.a.if23a251,x=u.a.f61c4bbf,k=u.a.fcc684a9,T=u.a.e05c00b4,A=u.a.f88553c8;class P extends r.Component{constructor(...e){super(...e),i()(this,"_handleSharePress",(()=>{const{analytics:e,scribeNamespace:t}=this.props;e.scribe({...t,action:"share_menu_click"})})),i()(this,"_renderMenu",(e=>{const t=this._getActionItems();return r.createElement(I.a,{items:t,onCloseRequested:e,shouldCloseOnClick:!0})})),i()(this,"_getActionItems",(()=>{const e=[];return e.push(this._getTweetShareAction()),e.push(this._getDmShareAction()),s.a.isAvailable()&&e.push(this._getCopyLinkAction()),void 0!==window.navigator.share&&e.push(this._getShareAction()),e})),i()(this,"_getShareAction",(()=>{const{externalShareLabel:e}=this.props;return{text:e,onClick:this._handleShare,Icon:h.a}})),i()(this,"_handleShare",(()=>{const{analytics:e,url:t,scribeNamespace:n,shareText:a}=this.props,i={text:a,url:t};window.navigator.share&&window.navigator.share(i).then((()=>{e.scribe({...n,action:"share_via"})})).catch((()=>{e.scribe({...n,action:"share_error"})}))})),i()(this,"_getCopyLinkAction",(()=>{const{copyLinkShareLabel:e}=this.props;return{text:e,onClick:this._handleCopyLink,Icon:C.a}})),i()(this,"_handleCopyLink",(()=>{const{analytics:e,url:t,addToast:n,scribeNamespace:a}=this.props;s.a.setString((e=>{const t=new URL(e,"https://twitter.com");return t.searchParams.has("s")||t.searchParams.set("s","20"),t.href})(t)),e.scribe({...a,action:"copy_link"}),n({text:A})})),i()(this,"_getDmShareAction",(()=>{const{dmShareLabel:e}=this.props;return{text:e,onClick:this._handleDMShare,Icon:S.a}})),i()(this,"_handleDMShare",(()=>{const{analytics:e,history:t,url:n,scribeNamespace:a}=this.props;e.scribe({...a,action:"share_via_dm"}),t.push({query:{text:n},pathname:"/messages/compose"})})),i()(this,"_getTweetShareAction",(()=>{const{tweetShareLabel:e}=this.props;return{text:e,onClick:this._handleTweetShare,Icon:w.a,testID:f}})),i()(this,"_handleTweetShare",(()=>{const{analytics:e,history:t,url:n,scribeNamespace:a,shareText:i}=this.props;e.scribe({...a,action:"share_via_tweet"}),t.push({pathname:"/compose/tweet",query:{text:`${""+(i?` ${i}`:"")} ${n}`},state:{positionCursorAtBeginning:!0}})}))}render(){return r.createElement(g,{onPress:this._handleSharePress,renderMenu:this._renderMenu,style:O.button,testID:v})}}i()(P,"defaultProps",{externalShareLabel:D,dmShareLabel:x,tweetShareLabel:k,copyLinkShareLabel:T});const O=E.a.create((e=>({button:{marginRight:e.spaces.space4}})));t.a=Object(y.a)(c(P))},MMRb:function(e,t,n){"use strict";n.r(t),n.d(t,"GLOBAL_STATE_KEY",(function(){return s.a})),n.d(t,"CONVERSATION_TYPE",(function(){return I.a})),n.d(t,"ENTRY_TYPE",(function(){return I.b})),n.d(t,"PAGINATION_STATUS",(function(){return I.c})),n.d(t,"addParticipants",(function(){return i.d})),n.d(t,"selectConversation",(function(){return i.u})),n.d(t,"selectConversationAvatarMediaId",(function(){return i.v})),n.d(t,"selectConversationFetchStatus",(function(){return i.y})),n.d(t,"selectConversationIsLoaded",(function(){return i.z})),n.d(t,"selectConversationIsRead",(function(){return i.A})),n.d(t,"selectConversationAvatarMediaIsUploading",(function(){return i.w})),n.d(t,"selectConversationAvatarMediaUploadProgress",(function(){return i.x})),n.d(t,"selectConversations",(function(){return i.C})),n.d(t,"selectHasConversations",(function(){return i.D})),n.d(t,"selectInboxTypeByConversation",(function(){return i.E})),n.d(t,"selectEntries",(function(){return r.l})),n.d(t,"selectEntriesForConversation",(function(){return r.m})),n.d(t,"selectEntry",(function(){return r.n})),n.d(t,"selectConversationIdsByInbox",(function(){return o.m})),n.d(t,"selectFetchStatus",(function(){return o.p})),n.d(t,"selectInboxIsLoaded",(function(){return o.q})),n.d(t,"selectIsLoadingTop",(function(){return o.r})),n.d(t,"selectUnreadCount",(function(){return o.t})),n.d(t,"selectUntrustedCursor",(function(){return o.v})),n.d(t,"selectUntrustedUnreadCount",(function(){return o.y})),n.d(t,"selectUntrustedConversationCount",(function(){return o.u})),n.d(t,"selectUntrustedLowQualityCursor",(function(){return o.x})),n.d(t,"selectUntrustedLowQualityConversationCount",(function(){return o.w})),n.d(t,"selectPoppedOutConversationId",(function(){return o.s})),n.d(t,"selectDrawerVisibility",(function(){return o.o})),n.d(t,"selectDrawerExperimentEnabled",(function(){return o.n})),n.d(t,"selectUpdates",(function(){return y.e})),n.d(t,"selectSearchConversations",(function(){return p})),n.d(t,"selectSearchCursor",(function(){return _})),n.d(t,"selectSearchQuery",(function(){return b})),n.d(t,"acceptConversation",(function(){return i.a})),n.d(t,"addAvatarMedia",(function(){return i.b})),n.d(t,"addWelcomeMessageToConversation",(function(){return i.e})),n.d(t,"disableMentionNotifications",(function(){return i.g})),n.d(t,"disableNotifications",(function(){return i.h})),n.d(t,"enableMentionNotifications",(function(){return i.i})),n.d(t,"enableNotifications",(function(){return i.j})),n.d(t,"fetchConversation",(function(){return i.k})),n.d(t,"fetchConversationFromParticipants",(function(){return i.l})),n.d(t,"fetchConversationIfNeeded",(function(){return i.n})),n.d(t,"fetchConversationHistory",(function(){return i.m})),n.d(t,"leaveConversation",(function(){return i.o})),n.d(t,"markAllAsRead",(function(){return i.p})),n.d(t,"markConversationRead",(function(){return i.q})),n.d(t,"muteDMUser",(function(){return i.r})),n.d(t,"unmuteDMUser",(function(){return i.H})),n.d(t,"removeAvatarMedia",(function(){return i.s})),n.d(t,"removeConversation",(function(){return i.t})),n.d(t,"setConversationAvatar",(function(){return i.F})),n.d(t,"toggleNotifications",(function(){return i.G})),n.d(t,"updateConversationReadState",(function(){return i.M})),n.d(t,"updateConversationAvatar",(function(){return i.I})),n.d(t,"updateConversationName",(function(){return i.K})),n.d(t,"updateTyping",(function(){return i.N})),n.d(t,"fetchInbox",(function(){return o.e})),n.d(t,"fetchInboxIfNeeded",(function(){return o.f})),n.d(t,"fetchTrustedInboxHistory",(function(){return o.g})),n.d(t,"fetchUntrustedInboxHistory",(function(){return o.h})),n.d(t,"fetchUntrustedLowQualityInboxHistory",(function(){return o.i})),n.d(t,"updateLastSeenEventId",(function(){return o.A})),n.d(t,"updateTrustedLastSeenEventId",(function(){return o.B})),n.d(t,"updateUntrustedLastSeenEventId",(function(){return o.C})),n.d(t,"popOutConversation",(function(){return o.l})),n.d(t,"setDrawerVisibility",(function(){return o.z})),n.d(t,"loadDrawerVisibilityFromPersistence",(function(){return o.k})),n.d(t,"deleteEntry",(function(){return r.f})),n.d(t,"markSpamStatus",(function(){return r.h})),n.d(t,"removeEntry",(function(){return r.j})),n.d(t,"fetchUpdates",(function(){return y.b})),n.d(t,"fetchUpdatesIfNeeded",(function(){return y.d})),n.d(t,"clearSearchCache",(function(){return f})),n.d(t,"searchConversations",(function(){return g}));var a=n("9OUN"),i=n("lRnM"),r=n("uKEd"),s=n("AQ79"),o=n("xPna"),l=n("Ssj5"),c=n("oEOe"),d=n("kGix"),u=n("WVrH");const m=c.a(s.b,"SEARCH"),h={cursor:"",conversationIds:[],cachedSearchQueries:[],fetchStatus:d.a.NONE,query:""};const p=e=>{var t;return null==(t=e[s.a].search)?void 0:t.conversationIds},_=e=>{var t;return null==(t=e[s.a].search)?void 0:t.cursor},b=e=>{var t;return null==(t=e[s.a].search)?void 0:t.query},g=e=>(t,n,{api:a})=>{var i;const r=n(),{directMessages:l={}}=r,{cursor:d}=l.search,{query:u}=e||{},h={...e,search_type:"conversations"};d&&(null==(i=l.search)?void 0:i.query)===u&&(h.cursor=d);const p=(e=>{var t;return null==(t=e[s.a].search)?void 0:t.cachedSearchQueries})(r).find((e=>e.cachedQuery===u&&e.cachedCursor===h.cursor)),_=c.b(t,{params:h,request:a.DirectMessages.search}),b=e=>{if(e&&e.result){const{conversations:t}=e.result,{users:n}=e.entities;return t&&Object.values(t).forEach((e=>e.isSearchResult=!0)),t?Object(o.c)({conversations:t,users:n}):null}};return p?t({type:Object(s.c)("SEARCH_SUCCESS"),payload:{result:null==p?void 0:p.result}}):_({actionTypes:m,context:"SEARCH",meta:{cachedQuery:h.query,cachedCursor:h.cursor}},b)},v=Object(s.c)("CLEAR_SEARCH_CACHE"),f=()=>({type:v});var y=n("xCUF"),I=n("aWyx");const E=Object(a.c)({conversations:i.f,entries:r.e,inbox:o.d,updates:y.a,search:function(e=h,t){switch(t.type){case m.REQUEST:return{...e,fetchStatus:d.a.LOADING};case m.FAILURE:return{...e,fetchStatus:d.a.FAILED,error:t.payload};case m.SUCCESS:{const n=t.payload&&t.payload.result?t.payload.result:null,{conversations:a,cursor:i,query:r}=n,{error:s,...o}=e,l=a?Object.keys(a):[],c=r===e.query?(e.conversationIds||[]).concat(l):l,{cachedQuery:u}=t.meta||{};return{...o,cachedSearchQueries:u?(e.cachedSearchQueries||[]).concat(Object.assign({},t.meta,{result:n})):e.cachedSearchQueries,conversationIds:c,cursor:i,query:r,fetchStatus:d.a.LOADED}}case v:case u.a:return h;default:return e}}});l.a.register({[s.a]:E});t.default=E},Mhzv:function(e,t,n){"use strict";n("kYxP");var a=n("ERkP"),i=n("zb92");const r=Object(i.a)({loader:()=>Promise.all([n.e(15),n.e(161)]).then(n.bind(null,"wHP+")),renderPlaceholder:()=>a.createElement("div",null)});t.a=r},RrqW:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("ERkP"),i=n("t62R"),r=n("FIs5"),s=n("rHpw"),o=n("3XMw"),l=n.n(o);const c="sensitive",d="blocked",u="blocked_by",m=Object.freeze({SENSITIVE:c,BLOCKED:d,BLOCKED_BY:u}),h={title:l.a.j32d345d,button:l.a.c3d89aca,body:void 0},p={title:l.a.a01d5a7c,body:({screenName:e})=>a.createElement(l.a.I18NFormatMessage,{$i18n:"ha49b9b7",screenName:e},a.createElement(i.c,{link:"https://support.twitter.com/articles/117063"},l.a.i859a9d3)),button:l.a.f277e949},_={title:l.a.b2311b7f,body:l.a.cab51f93,button:void 0},b=Object.freeze({[c]:h,[d]:p,[u]:_}),g=(e,t)=>"function"==typeof e?t&&e({screenName:t})||void 0:e,v=s.a.create((e=>({style:{alignItems:"center",paddingHorizontal:e.spaces.space40,paddingVertical:`calc(2 * ${e.spaces.space40})`}})));t.b=({onPress:e,type:t,screenName:n})=>{const{title:i,button:s,body:o}=b[t],l=g(i,n),c=g(o,n);return a.createElement(r.a,{buttonText:s,header:l,message:c,onButtonPress:e,style:v.style})}},Vgm9:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a=n("KEM+"),i=n.n(a),r=(n("kYxP"),n("ERkP")),s=n("v6aA"),o=n("1YZw"),l=n("rxPX"),c=n("Fg8X"),d=n("n4jD"),u=n("RqPI"),m=n("iUle");const h=e=>(t,n,{api:a})=>{const i=n(),r=Object(u.h)(i)||"",s=Object(d.c)(i),o=Object(m.a)(r),l={moment_id:e,teamUserId:s};return a.Moments.delete(l).then((()=>{t([c.a.deleteOne(e),o.removeEntry(`moment-${e}`)])}))};var p=Object(l.a)().propsFromState((()=>({activeTeamId:d.c}))).propsFromActions((()=>({addToast:o.b,deleteMoment:h}))).withAnalytics({component:"action_sheet"}),_=n("ACNv"),b=n("3XMw"),g=n.n(b),v=n("8jkQ"),f=n("Rp9C"),y=n("aITJ"),I=n("TnY3"),E=n("hiGS"),C=n("TW8A"),S=n("xrkw"),w=n("zIWA");const D=g.a.e8dff578,x=g.a.fcc64f01,k=g.a.ea193d66,T=g.a.d0df844c,A=g.a.fd61ab81,P=g.a.aaae5e7f,O=g.a.d96cf7cd,R=g.a.e7718461;class L extends r.Component{constructor(...e){super(...e),i()(this,"_momentMakerBridgeEnabled",y.b.isDesktopOS()),i()(this,"_getActionItems",(()=>{const{author:e,id:t,withEditAction:n}=this.props,a=[];return this._isOwner()?(a.push({confirmation:{label:O,headline:A,text:P,confirmButtonType:"destructive"},isEmphasized:!0,onClick:this._handleDeleteConfirm,text:k,Icon:E.a}),this._momentMakerBridgeEnabled&&n&&a.push({onClick:this._handleEdit,text:D,Icon:C.a}),a.push({link:`/i/moments/${t}/analytics`,onClick:this._handleNavigateAnalytics,text:T,Icon:S.a})):e&&a.push({onClick:this._handleReport,text:x,Icon:w.a}),a})),i()(this,"_handleEdit",(()=>{v.b.navigateTo(`https://twitter.com/i/moments/edit/${this.props.id}`)})),i()(this,"_handleReport",(()=>{const{analytics:{contextualScribeNamespace:e},history:t,id:n,scribeNamespace:a}=this.props,i={...e,...a};t.push({pathname:`/i/report/moment/${n}`,state:{clientReferer:window.location.pathname,isMedia:!0,scribeNamespace:i}})})),i()(this,"_handleNavigateAnalytics",(()=>{this._scribeAction("moment_analytics")})),i()(this,"_handleDeleteConfirm",(()=>{const{addToast:e,deleteMoment:t,history:n,id:a,redirectOnDelete:i}=this.props;t(a).then((()=>{this._scribeAction("delete"),e({text:R}),i&&n.goBack({backLocation:i,shouldReplaceOnFallback:!0})}))})),i()(this,"_scribeAction",(e=>{const{analytics:t,id:n,scribeMomentItem:a,scribeNamespace:i}=this.props,r={...t.contextualScribeData,items:[...t.contextualScribeData&&t.contextualScribeData.items?t.contextualScribeData.items:[],a||f.a.getMomentItem(n)]};t.scribe({action:e,data:r,...i})})),i()(this,"_isOwner",(()=>{const{activeTeamId:e,author:t}=this.props,{loggedInUserId:n}=this.context,a=n&&(null==t?void 0:t.id_str)===n,i=e&&(null==t?void 0:t.id_str)===e;return!!a||!!i}))}render(){return this.context.loggedInUserId?r.createElement(_.default,{actionItems:this._getActionItems(),onClose:this.props.onClose}):null}}i()(L,"contextType",s.a);const M=p(L);var N=Object(I.a)(M),B=n("OHiq");class U extends r.Component{constructor(...e){super(...e),i()(this,"_renderMenu",(e=>{const{author:t,eventId:n,title:a,redirectOnDelete:i,scribeMomentItem:s,scribeNamespace:o,withEditAction:l}=this.props;return r.createElement(N,{author:t,id:n,onClose:e,redirectOnDelete:i,scribeMomentItem:s,scribeNamespace:o,title:a,withEditAction:l})}))}render(){const{iconStyle:e,onPress:t,style:n,size:a}=this.props;return r.createElement(B.a,{iconStyle:e,onPress:t,renderMenu:this._renderMenu,size:a,style:n})}}i()(U,"defaultProps",{withEditAction:!0})},XvPy:function(e,t,n){"use strict";n.d(t,"a",(function(){return $t}));var a=n("KEM+"),i=n.n(a),r=n("ERkP"),s=n("dwig"),o=n("kGix"),l=n("v//M"),c=n("0+qk"),d=n("zlxh"),u=n("3XMw"),m=n.n(u),h=(n("kYxP"),n("rxPX")),p=n("G6rE"),_=Object(h.a)().propsFromState((()=>({loggedInUser:p.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userAvatarURI:e&&e.profile_image_url_https,userName:e&&e.name}))).withAnalytics(),b=n("MWbm"),g=n("cm6r"),v=n("XP29"),f=n("t62R"),y=n("rHpw"),I=n("cjZk"),E=n("3rWK"),C=n("ll3R");const S=m.a.b8f0483e,w=m.a.e349147b;class D extends r.Component{constructor(...e){super(...e),i()(this,"_handleClick",(e=>{const{analytics:t,onClick:n}=this.props;n&&n(e),t.scribe({component:"inline_compose_prompt",action:"click"})}))}render(){const{link:e,userAvatarURI:t,isDisabled:n,userName:a,promptLabel:i,withBorder:s,withComposeIcons:o}=this.props;return r.createElement(g.a,{accessibilityLabel:S,interactiveStyles:null,link:n?void 0:e,onClick:n?void 0:this._handleClick,style:[x.root,s&&x.borderBottom]},r.createElement(v.a,{accessibilityLabel:a,size:"xxLarge",uri:t}),r.createElement(b.a,{style:[x.column,x.bodyColumn]},r.createElement(b.a,{style:[x.fakeInput,n&&x.disabled]},r.createElement(f.c,{color:"gray600",numberOfLines:1},i)),o?r.createElement(r.Fragment,null,r.createElement(I.a,{style:x.icon}),r.createElement(E.a,{style:x.icon}),r.createElement(C.a,{style:x.icon})):null))}}i()(D,"defaultProps",{link:"/compose/tweet",promptLabel:w,withBorder:!1,withComposeIcons:!0});const x=y.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexDirection:"row",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,zIndex:1},borderBottom:{borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid"},column:{alignItems:"center",flexBasis:0,flexDirection:"row",flexShrink:1,minWidth:0},bodyColumn:{flexGrow:1,justifyContent:"space-between",marginLeft:e.spaces.space12},fakeInput:{backgroundColor:e.colors.gray50,borderRadius:e.borderRadii.infinite,flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},disabled:{opacity:.8},icon:{color:e.colors.primary,height:`calc(${e.spaces.space20} + ${e.spaces.space4})`,marginLeft:e.spaces.space12,width:`calc(${e.spaces.space20} + ${e.spaces.space4})`}})));var k=_(D),T=n("RrqW");class A extends r.Component{constructor(...e){super(...e),i()(this,"state",{interstitialsToDisplay:void 0}),i()(this,"_handleInterstitialPress",(()=>{const{interstitialsToDisplay:e=[]}=this.state,[,...t]=e;this.setState({interstitialsToDisplay:t})}))}static getDerivedStateFromProps(e,t){const{interstitials:n}=e,{interstitialsToDisplay:a}=t;return n&&!a?{interstitialsToDisplay:n}:null}render(){const{children:e}=this.props,{interstitialsToDisplay:t}=this.state;return t?this._renderNext():e()}_renderNext(){const{children:e}=this.props,{interstitialsToDisplay:t}=this.state,n=t&&t[0];return n?this._renderInterstitial(n):e()}_renderInterstitial(e){const{children:t}=this.props,{isFullPageInterstitial:n,screenName:a,type:i}=e,s=r.createElement(T.b,{onPress:this._handleInterstitialPress,screenName:a,type:i});return n?s:t(s)}}var P=A,O=n("v6aA"),R=n("zrc3"),L=n("8/3a");var M=class{constructor(e){i()(this,"_scribedIndices",new Map),i()(this,"_indiceCallbacks",new Map),i()(this,"_handleScribeImpression",(e=>{this._scribedIndices.set(e,!0),this._scribeImpression(e)})),this._scribeImpression=e}destroy(){Array.from(this._indiceCallbacks.values()).forEach((e=>{clearTimeout(e)}))}handleVisibilityChange({index:e,intersectionRatio:t}){if(this._scribedIndices.has(e))return;const n=this._indiceCallbacks.has(e);t>=.5&&!n?this._indiceCallbacks.set(e,setTimeout((()=>this._handleScribeImpression(e)),500)):t<.5&&n&&(clearTimeout(this._indiceCallbacks.get(e)),this._indiceCallbacks.delete(e))}},N=n("boUI");var B=n("Wms4");const U=m.a.f2382014,F=m.a.g66c8347;var j=({playbackDuration:e,type:t})=>{switch(t){case d.c.LIVE_BROADCAST:return r.createElement(B.a,{type:"live"},U);case d.c.REPLAY_BROADCAST:return r.createElement(B.a,{bold:!0},F);case d.c.VOD:return r.createElement(B.a,null,(e=>{if(e){const t=Math.round(e/1e3),n=t%60,a=n<10?`0${n}`:n,i=(t-n)/60;if(i>60){const e=i%60;return`${Math.floor(i/60)}:${e%60<10?`0${e}`:e}:${a}`}return`${i}:${a}`}})(e)||"");case d.c.GIF:return r.createElement(B.a,{bold:!0},"GIF");default:return null}},V=n("oEGd"),H=n("hqKg"),z=n("H9MA");const q=Object(H.createSelector)(z.c,(e=>({dataSaverMode:e})));var W=Object(V.c)(q),G=n("prG5"),Y=n("A91F");const $=m.a.i3f7ff0f;class K extends r.Component{constructor(...e){super(...e),i()(this,"state",{hasImageError:!1,currentSlate:void 0}),i()(this,"_handleError",(()=>{this.setState({hasImageError:!0})}))}static getDerivedStateFromProps(e,t){if(t.currentSlate){const{image:{url:n}}=t.currentSlate,{image:{url:a}}=e.slate,i=Object(d.f)(n),r=Object(d.f)(a),s="latest.jpg"===r;return i!==r||!e.dataSaverMode&&s?{...t,currentSlate:e.slate}:null}return{...t,currentSlate:e.slate}}componentDidUpdate(e,t){const{hasImageError:n,currentSlate:a}=this.state,{currentSlate:i}=t;n&&a&&i&&a.image&&i.image&&a.image.url!==i.image.url&&this.setState({hasImageError:!1})}render(){const{currentSlate:e,hasImageError:t}=this.state,{image:n,periscopeVariants:a,cropCandidates:i}=e||{};return n&&!t?r.createElement(G.a,{accessibilityLabel:$,aspectMode:Y.a.exact(y.a.theme.aspectRatios.landscape),backgroundColor:y.a.theme.colors.gray50,cropCandidates:i,customVariants:a,hideAcceptOverlay:!0,image:n,onError:this._handleError}):r.createElement(b.a,{style:Q.fallback})}}const Q=y.a.create((e=>({fallback:{backgroundColor:e.colors.gray50}})));var X=W(K),J=n("jV+4"),Z=n("9Xij"),ee=n("vCAy");const te=m.a.d58baa7e,ne=["views","viewers"];class ae extends r.Component{render(){const{onClick:e}=this.props,t=this._renderImage(),n=this._renderAttribution(),a=this._renderOverlay(t);return r.createElement(b.a,{accessibilityRole:"button",onClick:e,style:ie.carouselItem},a,n)}_renderAttribution(){const{mediaItem:{carouselItemInfo:e}}=this.props;if(e){const{verified:t,name:n,screenName:a}=e;return r.createElement(J.a,{isVerified:t,name:n,screenName:a,style:ie.userAttribution,withStackedLayout:!0})}}_renderOverlay(e){const{isSelected:t}=this.props;return r.createElement(Z.a,{ratio:y.a.theme.aspectRatios.landscape,style:[ie.image]},this._renderSocialProof(e),t&&r.createElement(b.a,{style:ie.selectedOverlay}))}_renderSocialProof(e){const{mediaItem:{carouselItemInfo:t}}=this.props,{type:n,socialProof:a,playbackDuration:i}=t||{},s=a&&ne.includes(a.type)?r.createElement(B.a,null,r.createElement(b.a,{style:ie.horizontalContainer},r.createElement(N.a,null),r.createElement(f.c,null,te(a.count)))):null,o=j({playbackDuration:i,type:n});return r.createElement(r.Fragment,null,e,r.createElement(ee.a,{align:"left"},o,s))}_renderImage(){const{mediaItem:{slate:e}}=this.props;return e?r.createElement(X,{slate:e}):null}}const ie=y.a.create((e=>({selectedOverlay:{...y.a.absoluteFillObject,borderColor:e.colors.primary,borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.large,borderStyle:"solid"},horizontalContainer:{flexDirection:"row"},image:{borderRadius:e.borderRadii.small},carouselItem:{paddingEnd:e.spaces.space12,width:150},userAttribution:{paddingTop:e.spaces.space4}})));var re=n("OhOQ");const se=Object.freeze({CarouselImpression:"carousel_impression",TileClick:"tile_click",TileImpression:"tile_impression",TileAutoClick:"tile_auto_click"}),oe={action:se.CarouselImpression},le={action:se.TileAutoClick},ce={action:se.TileImpression},de={action:se.TileClick};class ue extends r.PureComponent{constructor(...e){super(...e),i()(this,"_tabRefs",{}),i()(this,"_setTabRef",(e=>t=>{this._tabRefs[e]=t})),i()(this,"_getHandleOnClickForItem",((e,t)=>()=>{const{onCarouselScribe:n}=this.props;t(e,(()=>n(de)))})),i()(this,"_handleCarouselChildImpression",(e=>{const{onCarouselScribe:t}=this.props;t(ce,{tilePosition:e})})),i()(this,"_handleVisibleRangeChange",(e=>{this._impressionTracker.handleVisibilityChange(e)}))}componentDidMount(){const{onCarouselScribe:e}=this.props;this._impressionTracker=new M(this._handleCarouselChildImpression),this._shouldDisplayCarousel()&&e(oe)}componentWillUnmount(){this._impressionTracker.destroy()}componentDidUpdate(e){const{carousel:t}=e,{carousel:n,onCarouselScribe:a}=this.props;this._shouldDisplayCarousel()&&n.length!==t.length&&a(oe)}render(){return this._shouldDisplayCarousel()?r.createElement(re.a,{navButtonStyle:me.carouselNavButton,onVisibleRangeChange:this._handleVisibleRangeChange,stretchChildren:!1,style:me.carousel,tabRefs:this._tabRefs,visibleItemIndex:this.props.selectedItemIndex},this._renderCarouselItems()):null}_renderCarouselItems(){const{carousel:e,selectedItemIndex:t,setSelectedCarouselIndex:n}=this.props;return e.map(((e,a)=>r.createElement(ae,{isSelected:a===t,key:a,mediaItem:e,onClick:this._getHandleOnClickForItem(a,n),ref:this._setTabRef(a)})))}_shouldDisplayCarousel(){const{carousel:e}=this.props;return e.length>1}}const me=y.a.create((e=>({carousel:{height:"auto",paddingTop:e.spaces.space16},carouselNavButton:{alignSelf:"flex-start",paddingTop:e.spaces.space32}})));var he=ue,pe=n("/yvb");const _e=m.a.j1d352d7,be=m.a.d18909d4,ge={element:"reminder_button"},ve=Object.freeze({impression:"impression",click:"click"});class fe extends r.Component{constructor(...e){super(...e),i()(this,"_handleLayout",(()=>{const{onRemindButtonScribe:e}=this.props;this._buttonImpression||(this._buttonImpression=!0,e({action:ve.impression,...ge}))})),i()(this,"_handlePress",(()=>{const{remindMeSubscription:{subscribed:e,notification_id:t},eventId:n,onPress:a,onRemindButtonScribe:i}=this.props;a(n,{remind_me:!e,notification_id:t}),i({action:ve.click,...ge})}))}render(){const{remindMeSubscription:{toggle_visible:e,subscribed:t}}=this.props;return e?r.createElement(b.a,{onLayout:this._handleLayout,style:ye.remindMeButton},t?(n=this._handlePress,r.createElement(pe.a,{onPress:n,size:"normalCompact",type:"onMedia"},_e)):(e=>r.createElement(pe.a,{onPress:e,size:"normalCompact",type:"invertedSecondary"},be))(this._handlePress)):null;var n}}const ye=y.a.create((e=>({remindMeButton:{margin:e.spaces.space12}})));var Ie=fe,Ee=n("EskI"),Ce=n("0yYu"),Se=n("97Jx"),we=n.n(Se),De=n("ZUOq"),xe=n("MMRb"),ke=n("zHh/");const Te=Object(H.createSelector)(z.d,xe.selectDrawerVisibility,((e,t)=>({canAutoplay:Object(ke.a)(e),dmDrawerVisibility:t})));var Ae=Object(V.c)(Te),Pe=n("7JQg"),Oe=n("xPna");var Re=r.createContext({dockRequested:!1,closeRequested:!1}),Le=n("MXDK");const Me={component:"dock"},Ne=Object.freeze({dockedOnScroll:"dock_on_scroll",undockOnScroll:"undock_on_scroll",dismissTap:"dismiss_tap",undockTap:"undock_tap"});class Be extends r.Component{constructor(...e){super(...e),i()(this,"state",{closeRequested:!1,dockRequested:!1}),i()(this,"_getRef",(e=>{this._containerNode=e||void 0})),i()(this,"_requestCloseHandler",(()=>{const{onDockingScribeAction:e,onCloseDockComplete:t}=this.props;this.setState({dockRequested:!1,closeRequested:!0},(()=>{t&&t()})),e({...Me,action:Ne.dismissTap})})),i()(this,"_requestUndockHandler",(()=>{const{onDockingScribeAction:e}=this.props;this.setState({dockRequested:!1},(()=>{if(this._containerNode){const{offsetTop:e}=this._containerNode;Le.d({featureSwitches:this.context.featureSwitches,top:e})}e({...Me,action:Ne.undockTap})}))}))}UNSAFE_componentWillReceiveProps(e){const{closeRequested:t}=this.state;if(t&&!e.requestDock&&this.setState({closeRequested:!1}),!t&&this.state.dockRequested!==e.requestDock){const{onDockingScribeAction:t,requestDock:n}=e;this.setState({dockRequested:e.requestDock}),t({...Me,action:n?Ne.dockedOnScroll:Ne.undockOnScroll})}}render(){const{closeRequested:e,dockRequested:t}=this.state;return r.createElement(b.a,{ref:this._getRef},this.props.render({closeRequested:e,dockRequested:t,requestClose:this._requestCloseHandler,requestUndock:this._requestUndockHandler}))}}i()(Be,"contextType",O.a);var Ue=Be,Fe=n("vYiB"),je=n("xKuM"),Ve=n("Lsrn"),He=n("shC7"),ze=n("k/Ka");const qe=(e={})=>Object(ze.a)("svg",{...e,style:[Ve.a.root,e.style,He.a.getConstants().isRTL&&Ve.a.iconRTL],viewBox:"0 0 24 24"},r.createElement("g",null,r.createElement("path",{d:"M19.687 22H7.813C6.538 22 5.5 20.962 5.5 19.687V13.17c0-.413.336-.75.75-.75s.75.337.75.75v6.517c0 .448.365.813.813.813h11.873c.448 0 .813-.365.813-.813V7.813c0-.448-.365-.813-.813-.813H13.17c-.413 0-.75-.336-.75-.75s.337-.75.75-.75h6.517C20.962 5.5 22 6.538 22 7.813v11.873C22 20.962 20.962 22 19.687 22z"}),r.createElement("path",{d:"M11.996 10.936L4.56 3.5h4.636c.414 0 .75-.336.75-.75S9.61 2 9.196 2H2.75c-.414 0-.75.336-.75.75v6.455c0 .414.336.75.75.75s.75-.336.75-.75V4.56l7.436 7.437c.146.146.338.22.53.22s.384-.073.53-.22c.293-.294.293-.768 0-1.06z"})));qe.metadata={width:24,height:24};var We=qe,Ge=n("hOZg");const Ye=m.a.e839db39,$e=m.a.a7a119ec;class Ke extends r.PureComponent{constructor(...e){super(...e),i()(this,"_render",(({closeRequested:e,dockRequested:t,requestUndock:n,requestClose:a})=>{const{children:i,placeholder:s}=this.props;return r.createElement(Re.Provider,{value:{closeRequested:e,dockRequested:t}},t&&s,r.createElement(b.a,{style:t?[Qe.dockedContainer,this._getDockedBottomStyle()]:void 0},t&&this._renderDockingControlBar(n,a),i))})),i()(this,"_getDockedBottomStyle",(()=>{const{dockBottomOffset:e}=this.props;return{marginBottom:e}}))}render(){const{isDisabled:e,onDockingScribeAction:t,onCloseDockComplete:n,visibleThreshold:a}=this.props;return r.createElement(Fe.a,{isDisabled:e,style:Qe.root,visibleThreshold:a},(({isOffscreen:a})=>r.createElement(Ue,{onCloseDockComplete:n,onDockingScribeAction:t,render:this._render,requestDock:a&&!e})))}_renderDockingControlBar(e,t){const{subtitle:n,title:a}=this.props;return r.createElement(je.a,{rightControl:this._renderDockingControls(e,t),subtitle:n,title:a})}_renderDockingControls(e,t){return r.createElement(b.a,{style:Qe.dockingControls},r.createElement(pe.a,{accessibilityLabel:$e,icon:r.createElement(We,null),onPress:e,type:"text"}),r.createElement(pe.a,{accessibilityLabel:Ye,icon:r.createElement(Ge.a,null),onPress:t,type:"text"}))}}i()(Ke,"defaultProps",{placeholder:r.createElement(Z.a,{ratio:y.a.theme.aspectRatios.landscape})});const Qe=y.a.create((e=>({root:{zIndex:1},dockedContainer:{bottom:0,right:0,marginEnd:e.spaces.space20,boxShadow:e.boxShadows.small,maxWidth:De.a.columnWidths.secondary.normal,position:"fixed",width:De.a.columnWidths.secondary.normal},dockingControls:{flexDirection:"row",alignItems:"baseline"}})));var Xe=Ke,Je=n("nT9l"),Ze=n("hACr");class et extends r.Component{render(){const{backgroundColor:e,children:t,remindMeButton:n}=this.props,a=this._renderMediaLabel(),i=a||n?r.createElement(b.a,{style:[tt.verticalAlignment,(s=e,{backgroundImage:`linear-gradient(transparent 0%, ${s} 100%)`})]},r.createElement(b.a,{style:tt.wrapper},n,a)):null;var s;return r.createElement(b.a,null,i,t)}_renderMediaLabel(){const{mediaLabel:e}=this.props;return e?r.createElement(b.a,{style:tt.mediaLabelWrapper},r.createElement(f.c,{align:"left",color:"white",size:"normal",style:tt.mediaLabel},e)):null}}i()(et,"defaultProps",{backgroundColor:y.a.theme.colors.translucentBlack77});const tt=y.a.create((e=>({verticalAlignment:{flexDirection:"column",alignItems:"flex-end",zIndex:1,height:"25%",width:"100%",bottom:"0",left:"0",position:"absolute"},wrapper:{flexDirection:"row-reverse",flexWrap:"nowrap",justifyContent:"space-between",width:"100%",position:"absolute",bottom:"0",paddingBottom:e.spaces.space12,paddingStart:e.spaces.space12,paddingEnd:e.spaces.space12},mediaLabelWrapper:{justifyContent:"center",flexGrow:1,flexShrink:1},mediaLabel:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));var nt=et,at=n("TIdA"),it=n("wD1h"),rt=n("3dad");const st=m.a.f93bb3ee;class ot extends r.PureComponent{constructor(...e){super(...e),i()(this,"state",{shouldRenderImage:!0}),i()(this,"_getRenderDataSafeImage",(({originalImage:e,mediaItem:t})=>({useMinimumData:n,resourceSelectionHandler:a})=>{const{fallbackAccessibilityLabel:i,slate:{label:s,periscopeVariants:o},remindMeButton:l}=this.props,{ext_alt_text:c,expanded_url:d,original_info:u}=t,m=c||i,h=r.createElement(nt,{mediaLabel:n?void 0:s,remindMeButton:l},r.createElement(at.a,{accessibilityLabel:m,aspectMode:Y.a.exact(y.a.theme.aspectRatios.landscape),cropCandidates:u&&u.focus_rects,customVariants:o,image:e,onError:this._handleImageError,onVariantSelection:a,previewMode:n}));return d?r.createElement(Ze.a,{handlers:{[it.a.shortcuts.openMediaModal]:this._handleOpenPhotoModal}},h):h})),i()(this,"_handleImageError",(()=>{this.setState({shouldRenderImage:!1})})),i()(this,"_handleOpenPhotoModal",(()=>{const{history:e,coverMedia:t}=this.props;t&&e.push(t.expanded_url)}))}componentDidUpdate(e){const{shouldRenderImage:t}=this.state;if(!t){const{image:t}=this.props.slate,{image:n}=e.slate;t.url!==n.url&&this.setState({shouldRenderImage:!0})}}render(){return this.state.shouldRenderImage?this._renderImage():null}_renderImage(){const e=this._getMediaItem(),t=e&&rt.a.getOriginalImage(e);return e&&t?r.createElement(Je.a,{acceptLabel:st,renderContent:this._getRenderDataSafeImage({mediaItem:e,originalImage:t}),resourceId:t.url}):null}_getMediaItem(){const{slate:e,coverMedia:t}=this.props;return Object(d.q)(e,t)||void 0}}var lt=ot,ct=n("oQhu"),dt=n("mf9H"),ut="events-player",mt=n("Modb"),ht=n("lklz"),pt=n("Mhzv"),_t=n("38/B"),bt=n("XrEN");const gt=m.a.b0b38773,vt=new dt.b(.25),ft={hideFullScreenButton:!0};class yt extends r.Component{constructor(...e){super(...e),i()(this,"_multiVideoAutoAdvanceEnabled",this.context.featureSwitches.isTrue("live_event_multi_video_auto_advance_enabled")),i()(this,"_multiVideoAutoAdvanceDockEnabled",this.context.featureSwitches.isTrue("live_event_multi_video_auto_advance_dock_enabled")),i()(this,"_multiVideoAutoAdvanceFullscreenEnabled",this.context.featureSwitches.isTrue("live_event_multi_video_auto_advance_fullscreen_enabled")),i()(this,"state",{isPlayerMuted:!0,showUpNextPlayerOverlay:!1}),i()(this,"_getUiStack",Object(ct.a)(((e,t,n,a,i,s)=>({guestsState:o,playerApi:l,playerState:c,containerRef:d})=>r.createElement(pt.a,{containerRef:d,guestsState:o,isDocked:t,nextItemInfo:a,onUpNextComplete:this._getHandleUpNextOverlayComplete(i),onUpNextReplay:this._handleReplayPress,playerApi:l,playerDisplayOptions:e,playerState:c,renderUpNextImage:()=>{const e=null==s?void 0:s.slate;return r.createElement(r.Fragment,null,e?r.createElement(X,{slate:e}):null,r.createElement(b.a,{style:It.backgroundFading}))},shouldRenderUpNext:n})))),i()(this,"_renderHorizonPlayer",(({closeRequested:e,dockRequested:t,key:n,playerProps:a},i)=>{if(!a)return null;const{disableFullscreenVideo:s}=this.props,o=this._shouldRenderUpNext(i,t),l=s?ft:void 0,{carousel:c,selectedItemIndex:d}=this.props,u=this._getNextEligibleCarouselItemIndex(d,c),m=u>-1&&c?c[u]:void 0,h=null==m?void 0:m.carouselItemInfo,p=h?{playbackDurationMs:h.playbackDuration,name:h.name,screenName:h.screenName,type:h.type,verified:!!h.verified}:void 0,_=this._getUiStack(a.displayOptions,t,!!o,p,u,m);return a?r.createElement(b.a,{style:t?It.dockedContainerBackground:void 0},r.createElement(mt.a,we()({},a,{displayOptions:l,key:n,loopingThresholdMs:7e3,onProgressChange:this._handleProgressChange,preserveMuteState:!0,uiStack:_}))):null})),i()(this,"_handleProgressChange",((e,t=!1)=>{const{showUpNextPlayerOverlay:n}=this.state;t!==n&&this.setState({showUpNextPlayerOverlay:t})})),i()(this,"_getHandleUpNextOverlayComplete",(e=>t=>{if(e){const{onChildScribeAction:n,setSelectedCarouselIndex:a}=this.props,i={tilePosition:e};a(e),n(t?de:le,i)}this.setState({showUpNextPlayerOverlay:!1})})),i()(this,"_setPlayer",(e=>{this._playerInstance=e})),i()(this,"_shouldRenderUpNext",((e=!0,t=!1)=>{const{carousel:n,isPlayerFullscreen:a,selectedItemIndex:i,canAutoplay:r}=this.props,s=this._getNextEligibleCarouselItemIndex(i,n);return this._multiVideoAutoAdvanceEnabled&&r&&!_t.a.reducedMotionEnabled&&(!t||this._multiVideoAutoAdvanceDockEnabled)&&(!a||this._multiVideoAutoAdvanceFullscreenEnabled)&&e&&this.state.showUpNextPlayerOverlay&&s>-1})),i()(this,"_handleCloseDockComplete",(()=>{const{showUpNextPlayerOverlay:e}=this.state,{carousel:t,selectedItemIndex:n}=this.props;if(e){const e=this._getNextEligibleCarouselItemIndex(n,t);this._getHandleUpNextOverlayComplete(e)()}else this._playerInstance&&this._playerInstance.pause()})),i()(this,"_handleMuteChange",(({isPlayerMuted:e})=>this.setState({isPlayerMuted:e}))),i()(this,"_handleReplayPress",(()=>{this._playerInstance&&this._playerInstance.replay()})),i()(this,"_getNextEligibleCarouselItemIndex",Object(ct.a)(d.j))}render(){const{isDockingEnabled:e,carouselItemInfo:t,mediaType:n,onChildScribeAction:a,title:i}=this.props;let s;switch(n){case d.c.REPLAY_BROADCAST:case d.c.LIVE_BROADCAST:case d.c.VOD:s=this._renderVideo();break;case d.c.GIF:s=this._renderVideo({withUpNextOverlay:!1,isGif:!0});break;case d.c.SLATE:default:s=this._renderImage()}const o=e?this._renderUserSceenName(t):null;return r.createElement(Xe,{dockBottomOffset:this._getOffsetForDrawer(),isDisabled:!e,onCloseDockComplete:this._handleCloseDockComplete,onDockingScribeAction:a,subtitle:o,title:i,visibleThreshold:.25},r.createElement(b.a,{style:It.container,testID:ut},s))}_getOffsetForDrawer(){const{spaces:e}=y.a.theme,{dmDrawerVisibility:t}=this.props,n=parseInt(`${e.space20}`,10);return t===Oe.a.COLLAPSED?De.a.dmDrawerHeight.collapsed+n:t===Oe.a.EXPANDED?De.a.dmDrawerHeight.expanded+n:n}_renderImage(){const{history:e,remindMeButton:t,mediaDetails:n,slate:a}=this.props;return a?r.createElement(lt,{coverMedia:n.coverMedia,fallbackAccessibilityLabel:gt,history:e,remindMeButton:t,slate:a}):null}_renderVideo({withUpNextOverlay:e=!0,isGif:t=!1}={}){const{eventId:n,mediaDetails:{broadcastId:a,coverMedia:i,coverTweet:s={},mediaId:o,promotedContent:l},onFullscreenChange:c,slate:d}=this.props,{id_str:u}=i||{},{id_str:m}=s,{image:h,periscopeVariants:p}=d||{},_={accessibilityLabel:gt,aspectRatio:y.a.theme.aspectRatios.landscape,backgroundColor:y.a.theme.colors.gray0,maxLoopCount:t?void 0:3,onFullscreenChange:c,onMuteChange:this._handleMuteChange,promotedContent:l,playbackCoordination:vt,poster:h,customVariants:p,shouldPlayUnmuted:!this.state.isPlayerMuted,setPlayer:this._setPlayer};let b,g;if(a&&o)b=a,g={..._,videoType:"video",includeBroadcastEventAssociation:!0,source:{contentId:o,variants:[],videoId:ht.b.forBroadcast(a)}};else if(u&&m){const e=ht.b.forTweet(m),t=bt.a.getVideoFromCoverMedia(i),a=t&&bt.a.extractVideoProps(e,t,n);b=u,g=a?{...a,..._}:void 0}return r.createElement(Re.Consumer,null,(({closeRequested:t,dockRequested:n})=>this._renderHorizonPlayer({closeRequested:t,dockRequested:n,key:b,playerProps:g},e)))}_renderUserSceenName(e){const{name:t,userId:n,accountType:a,screenName:i}=e||{};let s=null;return n&&(a===d.a.TWITTER&&i?s=r.createElement(J.a,{screenName:i,weight:"normal",withLink:!0}):a===d.a.PERISCOPE&&t&&(s=r.createElement(f.c,{color:"gray600",link:`https://pscp.tv/u/${n}`},t))),s}}i()(yt,"contextType",O.a);const It=y.a.create((e=>({backgroundFading:{...y.a.absoluteFillObject,backgroundColor:e.colors.translucentBlack30},container:{zIndex:10},dockedContainerBackground:{backgroundColor:e.colors.cellBackground}})));var Et=Object(Pe.c)({element:"image"})(Ae(yt));m.a.f2382014,m.a.g66c8347;class Ct extends r.Component{constructor(...e){super(...e),i()(this,"_enableMultiVideo",this.context.featureSwitches.isTrue("live_event_multi_video_enabled")),i()(this,"_enableDocking",this.context.featureSwitches.isTrue("live_event_docking_enabled")),i()(this,"state",{headerWidth:0}),i()(this,"_getSelectedItemIndex",((e,t)=>Object(R.a)(e,(e=>e.id===t)))),i()(this,"_setSelectedCarouselIndex",(e=>{const{carousel:t,setSelectedCarouselItem:n}=this.props,a=t&&t[e];a&&n(a)}))}render(){const{selectedCarouselItem:e}=this.props;return r.createElement(r.Fragment,null,e&&this._renderHeaderMedia(e),this._renderDescription(e),r.createElement(Ce.a,null))}_renderDescription(e){var t,n,a;const{liveEventDetails:{author:i,category:s,description:o,title:l,timeString:c},isTOO:d}=this.props,u=null==e||null==(t=e.mediaDetails)?void 0:t.coverTweet,m=null==e||null==(n=e.mediaDetails)?void 0:n.coverMedia,h=null==e||null==(a=e.slate)?void 0:a.imageAttribution;return r.createElement(b.a,{style:St.contentContainer},l?r.createElement(L.a,{author:i,coverTweet:u,description:o,imageAttribution:h,isTOO:d,mediaType:null==m?void 0:m.type,preTitle:d||!i?s:"",time:c,title:l,withHashflags:!0}):null,this._renderScoreCard(),this._enableMultiVideo&&e?this._renderCarousel(e):null)}_renderHeaderMedia(e){const{carousel:t,disableFullscreenVideo:n,history:a,isPlayerFullscreen:i,liveEventDetails:{title:s,eventId:o},onChildScribeAction:l,onFullscreenChange:c}=this.props,{carouselItemInfo:d,mediaDetails:u,slate:m}=e,{type:h}=d,p=this._getDockingEnabled(h);return r.createElement(Et,{carousel:t,carouselItemInfo:d,disableFullscreenVideo:n,eventId:o,history:a,isDockingEnabled:p,isPlayerFullscreen:i,mediaDetails:u,mediaType:h,onChildScribeAction:l,onFullscreenChange:c,remindMeButton:this._renderRemindMeButton(),selectedItemIndex:this._getSelectedItemIndex(t||[],e.id),setSelectedCarouselIndex:this._setSelectedCarouselIndex,slate:m,title:s})}_renderRemindMeButton(){const{liveEventDetails:{eventId:e,remindMeSubscription:t},onChildScribeAction:n,remindMeButtonSubscribe:a,remindMeButtonUnsubscribe:i}=this.props;return!!this.context.loggedInUserId&&t&&a&&i?r.createElement(Ie,{eventId:e,onPress:t.subscribed?i:a,onRemindButtonScribe:n,remindMeSubscription:t}):null}_renderScoreCard(){const{withScoreCard:e,scoreData:t}=this.props;return t&&e?r.createElement(Ee.a,{scoreData:t}):null}_renderCarousel(e){const{carousel:t,onChildScribeAction:n}=this.props;return t?r.createElement(he,{carousel:t,onCarouselScribe:n,selectedItemIndex:this._getSelectedItemIndex(t,e.id),setSelectedCarouselIndex:this._setSelectedCarouselIndex}):null}_getDockingEnabled(e){const{isWide:t}=this.props,{loggedInUserId:n}=this.context,a=[d.c.LIVE_BROADCAST,d.c.REPLAY_BROADCAST,d.c.VOD];return!!n&&this._enableDocking&&t&&a.includes(e)}}i()(Ct,"contextType",O.a);const St=y.a.create((e=>({contentContainer:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical}})));var wt=n("9bsQ"),Dt=n("A9rn"),xt=n("IG4P"),kt=n("fTQJ"),Tt=n("FIs5"),At=n("k/OQ"),Pt=n("mw9i"),Ot=n("QIgh"),Rt=n("8UdT"),Lt=n("iu0J"),Mt=n("IcAo"),Nt=n("zgaL");var Bt=n("U+bB"),Ut=n("YeIG"),Ft=n("fs1G");const jt=m.a.abdcd689,Vt=m.a.a1bb552d,Ht=m.a.b103771f,zt=m.a.bb980dbf,qt=m.a.e9f1fbcb,Wt=m.a.dfd7bbaf,Gt=()=>r.createElement(Tt.a,{header:qt,message:Wt}),Yt=Object(ct.a)(((e,t)=>Object(wt.a)(e,t)));class $t extends r.Component{constructor(e){super(e),i()(this,"state",{selectedCarouselItemId:void 0}),i()(this,"_render",(()=>{const{interstitialOrderToDisplay:e}=this.props;return this._refreshControlWrapper(r.createElement(P,{interstitials:e},(e=>r.createElement(r.Fragment,null,this._renderHeader(),this._renderInlineCompose(),e||this._renderTimeline()))))})),i()(this,"_getComposeTimelineDetails",(()=>this.props.timelineDetails.composeDetails)),i()(this,"_setSelectedCarouselItem",(e=>{const{onSelectedCarouselItemChange:t}=this.props;t&&t(e),this.setState({selectedCarouselItemId:e.id})})),i()(this,"_handleInlineComposeOnClick",(e=>{e.preventDefault();const{history:t}=this.props,n={pathname:"/compose/tweet",state:this._getComposeTimelineDetails()};t.push(n)}));const{timelineMessageOverride:t,withTweetActionsDisabled:n}=e;this._entryConfiguration=(({withTweetActionsDisabled:e})=>({...Object(Ot.a)({withTweetActionsDisabled:e}),[Rt.b.MomentAnnotation]:Nt.a,[Rt.b.EventSummary]:Object(Lt.a)({errorContext:"LIVE_EVENT_TIMELINE"})}))({withTweetActionsDisabled:n}),this._timelinePreprocessor=(e=>t=>e?t.map((t=>{if(t.type===Rt.b.Message){const n={content:{content:{inlinePrompt:{headerText:e}}}};return Object(Mt.a)({},t,n)}return t})):t)(t)}render(){const{fetchStatus:e,liveEventDetails:t,onFetch:n}=this.props;return r.createElement(l.a,{accessibilityLabel:jt,fetchStatus:e,key:t.eventId,onRequestRetry:n,render:this._render})}_renderHeader(){const{carousel:e,disableFullscreenVideo:t,history:n,isPlayerFullscreen:a,isTOO:i,isWide:s,liveEventDetails:o,onChildScribeAction:l,onFullscreenChange:c,remindMeButtonSubscribe:u,remindMeButtonUnsubscribe:m,scoreData:h,timelineDetails:{hashtag:p}}=this.props,{selectedCarouselItemId:_}=this.state,b=Object(d.n)(e,_);return r.createElement(Ct,{carousel:e,disableFullscreenVideo:t,history:n,isPlayerFullscreen:a,isTOO:i,isWide:s,liveEventDetails:o,onChildScribeAction:l,onFullscreenChange:c,remindMeButtonSubscribe:u,remindMeButtonUnsubscribe:m,scoreData:h,selectedCarouselItem:b,setSelectedCarouselItem:this._setSelectedCarouselItem,timelineHashtag:p,withScoreCard:!s})}_renderInlineCompose(){const{isWide:e,timelineDetails:{hashtag:t}}=this.props,n=t?Vt({hashtag:t}):Ht;return e?r.createElement(r.Fragment,null,r.createElement(k,{onClick:this._handleInlineComposeOnClick,promptLabel:n}),r.createElement(Ce.a,null)):null}_renderTimeline(){const e=this._renderTimelineLinks(),t=this._renderRichTimeline();return e.length>1||1===e.length&&e[0].isCustom?r.createElement(r.Fragment,null,r.createElement(At.a,{accessibilityLabel:zt,links:e.map((e=>({key:e.key,label:e.label,isActive:e.isActive,to:{...e.to}})))}),r.createElement(b.a,{style:Kt.timelineContainer},t)):t}_renderTimelineLinks(){const{timelineDetails:{timelineLinks:e}}=this.props;return e.map((({customizationInfo:e,label:t,...n})=>{const a=!Object(Ut.a)(e);return{...n,key:t,label:a&&e?this._renderCustomLabel({label:t,customizationInfo:e}):r.createElement(f.c,{weight:"bold"},t),isCustom:a}}))}_renderCustomLabel({label:e,customizationInfo:{badge_media:t,title_color:n}}){return r.createElement(b.a,{style:Kt.timelineLabel},t&&t.url?r.createElement(Bt.a,{source:t.url,style:Kt.timelineLabelBadge}):null,r.createElement(f.c,{style:{color:n},weight:"bold"},e))}_renderRichTimeline(){const{isPlayerFullscreen:e,isWide:t,liveEventDetails:{title:n=zt},onTimelinePoll:a,pollingIntervalMs:i,timelineDetails:{eventId:o,timelineId:l},withFloatingComposeButton:c}=this.props,d=Yt(o,l),u=e||t||!c?null:this._renderFloatingComposeButton();return r.createElement(s.a,{component:Pt.a,fab:u},r.createElement(kt.a,{anchoring:Dt.a,entryConfiguration:this._entryConfiguration,module:d,onTimelinePoll:a,pollingIntervalMsOverride:i,preprocessEntryList:this._timelinePreprocessor,refreshControl:null,renderEmptyState:Gt,title:n}))}_renderFloatingComposeButton(){const{history:e}=this.props;return r.createElement(c.a,{getLocationState:this._getComposeTimelineDetails,history:e})}_refreshControlWrapper(e){const{onFetch:t,refreshStatus:n}=this.props;return r.createElement(xt.a,{isRefreshing:n===o.a.LOADING,onRefresh:t},e)}}i()($t,"defaultProps",{onChildScribeAction:Ft.a});const Kt=y.a.create((e=>({timelineLabel:{flexDirection:"row",alignItems:"flex-end"},timelineLabelBadge:{borderRadius:e.borderRadii.infinite,height:e.lineHeights.body,marginEnd:e.spaces.space4,width:e.lineHeights.body},timelineContainer:{minHeight:"90vh"}})))},hiGS:function(e,t,n){"use strict";var a=n("ERkP"),i=n("Lsrn"),r=n("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,style:[i.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),a.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})));s.metadata={width:24,height:24},t.a=s},jHwr:function(e,t,n){"use strict";t.a=(e,t)=>{let n=null;const a=()=>{n=null,e()};return()=>(n||(n=t(a)),n)}},"l+4e":function(e,t,n){"use strict";var a=n("ERkP"),i=n("rcen"),r=n("rHpw"),s=n("MWbm");const o=r.a.create((e=>({root:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},header:{fontSize:e.fontSizes.large},headerMargin:{marginBottom:e.spaces.space16},body:{fontSize:e.fontSizes.normal}})));t.a=({header:e={},body:t={}})=>a.createElement(s.a,{focusable:!0,style:o.root,tabIndex:"0"},e.text?a.createElement(i.c,{entities:e.entities,forceAutoTextDirection:!0,style:[o.header,t.text&&o.headerMargin],text:e.text,weight:"bold"}):null,t.text?a.createElement(i.c,{entities:t.entities,forceAutoTextDirection:!0,style:o.body,text:t.text}):null)},mf9H:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h}));var a=n("KEM+"),i=n.n(a),r=n("6/RC"),s=n("HT/6"),o=n("jHwr"),l=n("+d3d"),c=n("fs1G"),d=(e,t)=>{if(0===e.length)return;let n=e[0],a=t(n);for(let i=1;i<e.length;i++){const r=e[i],s=t(r);s<a&&(n=r,a=s)}return n};const u=.25;class m{constructor(e=u){i()(this,"_players",[]),i()(this,"_setPlayerState",((e,t)=>{e.previousPlaybackState=e.playbackState,e.playbackState=t})),i()(this,"_updatePlaybackStates",(()=>{const e=this._players.find((e=>e.playbackState===s.a.USER_PLAYING));e&&!this._canPlay(e)?(this._pausePlayer(e),this._triggerAutoplay()):e?this._stopAllExcept(e):this._triggerAutoplay()})),i()(this,"_scheduleUpdate",r.canUseDOM?Object(l.a)(Object(o.a)(this._updatePlaybackStates,window.requestIdleCallback?e=>window.requestIdleCallback(e,{timeout:200}):window.requestAnimationFrame),300,{leading:!1,trailing:!0}):c.a),this._minimumVisibilityForAutoplay=e}register({canAutoplay:e,onAutoPlayRequest:t,onFullscreenEntered:n,onFullscreenExited:a,onPauseRequest:i,isLooping:r}){const o={placement:void 0,playbackState:s.a.INITIAL,previousPlaybackState:s.a.INITIAL,commandHandlers:{onAutoPlayRequest:t,onFullscreenEntered:n,onFullscreenExited:a,onPauseRequest:i},canAutoplay:e,isLooping:r};return this._players.push(o),{reset:()=>this._handleReset(o),signalFullscreenChange:e=>this._handleFullscreenChanged(e),signalPlacementChange:e=>this._handlePlacementChange(o,e),signalPlay:()=>this._handlePlay(o),signalPause:()=>this._handlePause(o),signalPlaybackFinish:()=>this._handlePlaybackFinished(o),unregister:()=>this._handleUnregister(o)}}_handleFullscreenChanged(e){this._players.forEach((t=>{const{onFullscreenEntered:n,onFullscreenExited:a}=t.commandHandlers;e&&n?n():!e&&a&&a()}))}_handlePlacementChange(e,t){const n=t.scrollY();e.placement=t,this._scrollY!==n&&(this._scrollY=n),e.playbackState===s.a.FINISHED&&0===t.visibleFraction()&&this._setPlayerState(e,s.a.INITIAL),this._scheduleUpdate()}_handlePlay(e){e.playbackState!==s.a.AUTO_PLAYING&&(e.previousPlaybackState===s.a.AUTO_PLAYING&&e.isLooping?this._setPlayerState(e,s.a.AUTO_PLAYING):this._setPlayerState(e,s.a.USER_PLAYING)),this._stopAllExcept(e)}_handlePause(e){e.playbackState!==s.a.AUTO_PAUSED&&this._setPlayerState(e,s.a.USER_PAUSED)}_handlePlaybackFinished(e){this._setPlayerState(e,s.a.FINISHED)}_handleReset(e){this._setPlayerState(e,s.a.INITIAL),this._scheduleUpdate()}_handleUnregister(e){const t=this._players.indexOf(e);t>=0&&this._players.splice(t,1),this._scheduleUpdate()}_triggerAutoplay(){const e=this._players.filter((e=>this._canAutoPlay(e))),t=this._findBestAutoplayFit(e);t?(this._stopAllExcept(t),this._autoPlayVideo(t)):this._players.forEach((e=>{e.playbackState===s.a.AUTO_PLAYING&&this._pausePlayer(e)}))}_canAutoPlay(e){const t=!!e.placement&&e.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,n=e.playbackState===s.a.USER_PAUSED,a=e.playbackState===s.a.FINISHED;return e.canAutoplay&&t&&!n&&!a}_canPlay(e){const t=!!e.placement&&e.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,n=!!e.placement&&e.placement.visibleFraction()>0;return!e.placement||n||t}_stopAllExcept(e){this._players.forEach((t=>{t===e||t.playbackState!==s.a.USER_PLAYING&&t.playbackState!==s.a.AUTO_PLAYING||this._pausePlayer(t)}))}_pausePlayer(e){const{onPauseRequest:t}=e.commandHandlers;this._setPlayerState(e,s.a.AUTO_PAUSED),t()}_autoPlayVideo(e){const{onAutoPlayRequest:t}=e.commandHandlers;this._setPlayerState(e,s.a.AUTO_PLAYING),t()}_findBestAutoplayFit(e){return 0===this._scrollY?d(e,this._getDistanceToTop):d(e,this._getDistanceToCenter)}_getDistanceToCenter(e){return e.placement?e.placement.distanceToCenter():Number.MAX_VALUE}_getDistanceToTop(e){return e.placement?e.placement.distanceToTop():Number.MAX_VALUE}}const h=new m},zgaL:function(e,t,n){"use strict";var a=n("ezF+"),i=(n("ERkP"),n("VPAj")),r=n("l+4e"),s=n("zh9S"),o=n("Rp9C");t.a=a.d(a.f({component:r.a,bindActions:()=>({scribe:s.c}),createProps:({entry:e})=>{const{content:t}=e;return{header:t.header,body:t.text}},onImpression:({scribeNamespace:e,scribeData:t,actions:{scribe:n}})=>{n({...e,action:"impression"},t)},getScribeDataItem:({itemMetadata:{clientEventInfo:e}})=>o.a.getAllSurfaceDetails(e),divider:{bottom:!0,top:!0},isFocusable:Object(i.a)(!0)}))},zlxh:function(e,t,n){"use strict";n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return E})),n.d(t,"q",(function(){return x})),n.d(t,"p",(function(){return k})),n.d(t,"n",(function(){return T})),n.d(t,"o",(function(){return A})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return R})),n.d(t,"g",(function(){return L})),n.d(t,"a",(function(){return N})),n.d(t,"f",(function(){return V})),n.d(t,"j",(function(){return z}));n("kYxP"),n("Cm4o");var a=n("3XMw"),i=n.n(a),r=n("lPpt"),s=n("XkXQ"),o=n("oQhu"),l=n("zrc3"),c=n("3dad"),d=n("XrEN");const u=e=>`https://twitter.com/i/events/${e}`,m=i.a.d2fb334b,h=i.a.ad16f482,p=(i.a.h0786685,"1"),_="RUNNING",b={"600x1200":4,"1024x2048":3,"340x680":2,"150x150":1},g=i.a.i0ed3f4d,v=Object.freeze({LIVE_BROADCAST:"liveBroadcast",REPLAY_BROADCAST:"replayBroadcast",VOD:"vod",GIF:"gif",SLATE:"slate"}),f=(e,t,n)=>{if(n&&n.url)return(e=>-1!==e.url.indexOf("pscp.tv"))(n)?[...e?[{width:128,height:128,uri:e}]:[],...t?[{width:360,height:360,uri:t}]:[],{width:n.width,height:n.height,uri:n.url}]:void 0},y=Object(o.a)(((e,t)=>e.slates&&t&&e.slates[t])),I=(e,t)=>{const n=(e.slate||e.fallback_slate||{}).id,a=((e,t)=>{const n=y(e,t),a=n&&n.variants||[];return Object(s.a)(a,(e=>{const{name:t}=e;return b[t]||0}))})(t,n),i=((e,t,n)=>{const a=y(e,t);let i;if(n&&a){const{focus_rects:n=[],tweet_id:s}=a;if(i=n.length?n:void 0,!i&&s){var r;const n=(null==e?void 0:e.tweets)&&(null==e?void 0:e.tweets[s]),a=((null==n||null==(r=n.extended_entities)?void 0:r.media)||[]).find((e=>e.media_key===t));i=a&&c.a.getCropCandidates(a)}}return i})(t,n,a),r=((e,t,n)=>e?t.slates[n].label:void 0)(a,t,n),{tweet_id:o,attribution:l}=y(t,n)||{},d=((e,t)=>{if(t.broadcast&&t.broadcast.id){const n=t.broadcast.id,a=C(e,n);return a&&{small:a.image_url_small,medium:a.image_url_medium}}})(t,e)||{},u=a&&f(d.small,d.medium,a);return n&&a?{id:n,image:a,imageAttribution:l,periscopeVariants:u,cropCandidates:i,label:r,tweetId:o}:void 0},E=(e,t)=>{const n=(e=>{const{attribution_user_id:t}=e.liveEventDetails;return e.users?e.users[t]:void 0})(t),{category:a,description:i,remind_me_subscription:r,short_title:s,time_string:o,title:l}=t.liveEventDetails;return{author:n,category:a,description:i,eventId:e,remindMeSubscription:r,shortTitle:s||l,timeString:o,title:l}},C=(e,t)=>e.broadcasts&&t?e.broadcasts[t]:void 0,S=(e,t)=>{const{extended_entities:n={}}=e,{media:a=[]}=n;return a.find((e=>e.media_key===t||"photo"!==e.type))},w=(e,t,n)=>{const{media:a={}}=e,{mediaEntity:i}=a;return!i||i.broadcast_id!==t&&i.media_tweet_id!==n?void 0:e.promotedContent},D=(e,t,n,a,i,r)=>{const s=t&&i?S(t,i):void 0,o=C(n,e),l=o?e:void 0,c=null==o?void 0:o.media_key,d=null==o?void 0:o.status,u=null==o?void 0:o.twitter_user_id,m=null==o?void 0:o.user_display_name,h=null==o?void 0:o.username,p=null==o?void 0:o.width,b=null==o?void 0:o.height,g=null==o?void 0:o.broadcast_source,v=null==o?void 0:o.camera_rotation,f=null==o?void 0:o.image_url,y=null==o?void 0:o.replay_edited_start_time;return{mediaId:null==o?void 0:o.media_id,coverTweet:t,coverMedia:s,broadcastId:l,broadcastMediaKey:c,broadcastTitle:d,broadcastTwitterId:u,broadcastDisplayName:m,broadcastUsername:h,broadcastWidth:p,broadcastHeight:b,broadcastThumbnail:f,broadcastReplayStartTime:y,broadcastSource:g,broadcastOrientation:v,isLive:(e=>!!e&&e.state===_)(o),promotedContent:r&&w(r,l,i)}},x=(e,t)=>e&&e.image?{media_url_https:e.image.url,original_info:{focus_rects:e.cropCandidates,height:e.image.height,width:e.image.width},ext_alt_text:t?t.ext_alt_text:g,id_str:e.id,expanded_url:"",type:"photo"}:void 0,k=(e,t,n)=>{const a=t.liveEventDetails.timelines||[],i=a.length?a[0].timeline_id:p,r=a.length?a[0].hashtag:void 0,s=a.length?a[0].compose_semantic_core_id:void 0;let o,l,c=0;const d=n&&a.some((e=>e.timeline_id===n)),u=a.map((({compose_semantic_core_id:t,customization_info:a,hashtag:r,timeline_id:s,timeline_source_id:u,timeline_source_type:m,title:h},p)=>{const _=s===i;return(d&&s===n||_)&&(c=p,o=r,l=t),{isActive:()=>d?s===n:_,to:{pathname:`/i/events/${e}`,query:{timeline:s}},label:h,customizationInfo:a,hashtag:r,timelineId:s,timelineSourceId:u,timelineSourceType:m}})),m=o||r;return{composeDetails:{composeSemanticCoreId:l||s,...m?{defaultText:` ${m}`,positionCursorAtBeginning:!0}:{defaultText:""}},eventId:e,hashtag:m,timelineId:d&&n?n:i,timelineIndex:c,timelineLinks:u}},T=(e,t)=>{if(!e)return;const n=t&&P(e,t),a=A(e);return n||e[a]},A=e=>{const t=Object(l.a)(e,(e=>e.selected));return-1===t?0:t},P=(e,t)=>e&&e.find((e=>e.id===t)),O=e=>{const{response:{polling_interval_seconds:t}}=e;return t>0?t:0},R=e=>{const{score:t}=e.response;return t&&t.data&&t.data.moments?t.data:void 0},L=(e,t,n)=>{const{carousel:a}=e.response;return(a||[]).filter((e=>!e.moment)).map((t=>{let a;const{entry_id:i}=t,s=I(t,e),o=s&&s.id,l=t.tweet_media&&t.tweet_media.id||s&&s.tweetId,c=l?r.a.selectHydratedTweet(e,l):void 0,d=D(i,c,e,0,o,n);let u;if(t.broadcast){const n=e.broadcasts?e.broadcasts[t.broadcast.id]:void 0;u=n&&n.twitter_user_id&&e.users&&e.users[n.twitter_user_id]||void 0,a=n?B(u,n):void 0}else if(t.slate&&l||t.tweet_media){const n=l&&e.tweets?e.tweets[l]:void 0;u=n&&e.users?e.users[n.user]:void 0,a=u?U(u,!!t.tweet_media,o,n,e):void 0}else t.slate&&s&&(a={type:v.SLATE});return a||!s||t.tweet_media||(a={type:v.SLATE}),!M(u)&&a&&s?{id:i,carouselItemInfo:{...a,socialProof:t.social_proof},mediaDetails:d,slate:s,selected:!!t.selected}:void 0})).filter(Boolean)},M=e=>e&&(e.blocking||e.blocked_by)||!1,N=Object.freeze({TWITTER:"twitter",PERISCOPE:"periscope"}),B=(e,t)=>({verified:!!e&&e.verified,screenName:e?e.screen_name:void 0,name:e?e.name:t.user_display_name,userId:e?e.id_str:t.user_id,type:t.state===_?v.LIVE_BROADCAST:v.REPLAY_BROADCAST,accountType:e?N.TWITTER:N.PERISCOPE,profileImageUrl:e?e.profile_image_url_https:void 0}),U=(e={},t,n,a,i)=>{let r,s,o;if(t&&a&&n){const e=S(a,n);if(e){const{type:t}=e;s=j(t);const n=d.a.getVideoFromCoverMedia(e),{video_info:a,source_user_id_str:l}=n||{};r=a&&a.duration_millis,o=l&&F(l,i)}}else s=v.SLATE;const{verified:l,screen_name:c,name:u,id_str:m}=o||e;return s?{accountType:N.TWITTER,verified:l,screenName:c,name:u,type:s,playbackDuration:r,userId:m}:void 0},F=(e,t)=>t.users&&t.users[e],j=e=>{switch(e){case"animated_gif":return v.GIF;case"vine":case"video":return v.VOD;default:return}},V=e=>{let t;if(e){const n=new URL(e).pathname.split("/");t=n[n.length-1]}return t},H=e=>!!e&&!!e.carouselItemInfo&&e.carouselItemInfo.type!==v.GIF&&e.carouselItemInfo.type!==v.SLATE,z=(e,t=[])=>{const n=e+1,a=t.slice(n).findIndex(H);return a>-1?a+n:a}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.LiveEvent.03bef275.js.map